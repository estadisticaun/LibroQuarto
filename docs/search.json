[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Crear tablas de resumen en R",
    "section": "",
    "text": "Usando gt Table"
  },
  {
    "objectID": "index.html#introducción",
    "href": "index.html#introducción",
    "title": "Crear tablas de resumen en R",
    "section": "Introducción",
    "text": "Introducción\nEl paquete gt se enfoca en simplificar la creación de tablas de visualización con un aspecto atractivo. Es importante distinguir entre las tablas de datos (por ejemplo, tibbles, data.frames, etc.) y aquellas tablas que encontrarías en una página web, un artículo de revista o en una revista en sí. Estas tablas también pueden ser llamadas tablas de presentación, tablas resumen o simplemente tablas en realidad.\n\n\n\nFigura 1: GT Table\n\n\nPodemos considerar las tablas de visualización como elementos de salida solamente, donde no queremos utilizarlas nuevamente como entrada. Otras características incluyen anotaciones, estilos de elementos de tabla y transformaciones de texto que ayudan a comunicar de manera más clara el tema en cuestión.\nUn ejemplo de la estructura de la tabla de visualización resultante se puede ver en Figura 1.\nA continuación presentamos un video de Richh Iannone llamado “Making Beautiful Tables with {gt}” disponible en YouTube\n\nSugerimos que comience estudiando Capítulo 1"
  },
  {
    "objectID": "Conceptos Basicos.html",
    "href": "Conceptos Basicos.html",
    "title": "1  Conceptos Básicos",
    "section": "",
    "text": "Usando la base de datos de R llamada islands, que es un vector (que contiene el área en miles de millas cuadradas de masas terrestres de más de 10.000 millas cuadaradas), crearemos un objeto tibble utilizando el paquete dplyr.\n\n# Cargar libreria\nsuppressMessages(library(dplyr))\n\n# Obtener las 10 masas terrestres más grandes en el mundo\nislands_tbl <- \n  tibble(\n    name = names(islands),\n    size = islands\n  ) |>\n  arrange(desc(size)) |>\n  slice(1:10)\n\n# Cambiamos a español los nombres de las columnas\nnames(islands_tbl)<-c(\"Nombre\",\"Tamaño\")\n\nislands_tbl\n\n# A tibble: 10 × 2\n   Nombre        Tamaño\n   <chr>          <dbl>\n 1 Asia           16988\n 2 Africa         11506\n 3 North America   9390\n 4 South America   6795\n 5 Antarctica      5500\n 6 Europe          3745\n 7 Australia       2968\n 8 Greenland        840\n 9 New Guinea       306\n10 Borneo           280\n\n\nDado que islands_tbl es un tibble, ahora tenemos una entrada adecuada para gt. Si pasamos islands_tbl a la función gt(), obtendremos una tabla gt como resultado. Por cierto, también podríamos haber utilizado un data frame en su lugar como datos de tabla válidos para gt.\n\n# Instalar libreria\nsuppressMessages(library(gt))\n\n# Crear tabla\n(gt_tbl <- gt(islands_tbl))\n\n\n\n\n\n  \n    \n    \n      Nombre\n      Tamaño\n    \n  \n  \n    Asia\n16988\n    Africa\n11506\n    North America\n9390\n    South America\n6795\n    Antarctica\n5500\n    Europe\n3745\n    Australia\n2968\n    Greenland\n840\n    New Guinea\n306\n    Borneo\n280\n  \n  \n  \n\n\n\n\nEs una tabla básica, pero se le pueden agregar títulos, subtítulos, grupos, subgrupos, y más, según los datos que tengamos y la especificación que le demos a la tabla, como veremos más adelante en Capítulo 2."
  },
  {
    "objectID": "Agregar Partes.html",
    "href": "Agregar Partes.html",
    "title": "2  Agregar partes a una tabla simple",
    "section": "",
    "text": "Con la librería gt podemos personalizar la tabla como deseemos. A continuación podemos apreciar un ejemplo de la estructura de una tabla creada con gt\n\n\n\nPartes de una gt Table\n\n\nLas partes son:\n\nTable Heather, el encabezado de la tabla, que puede tener título y/o subtítulo.\nStub y Stub Head, donde se agregan los títulos de las filas de la tabla.\nColum labels con los nombres de las columnas\nTable body donde están las filas y las columnas “originales”.\nTable footer, que puede tener las notas de pie de página y algunas referencias."
  },
  {
    "objectID": "Agregar Partes.html#table-header",
    "href": "Agregar Partes.html#table-header",
    "title": "2  Agregar partes a una tabla simple",
    "section": "2.1 Table header",
    "text": "2.1 Table header\nPara agregar un encabezado a nuestra tabla usamos la función tab_header() y así podemos incluir títulos y subtítulos de ser necesario.\nAntes nuestra tabla se veía así\n\n\n\n\n\n\n  \n    \n    \n      name\n      size\n    \n  \n  \n    Asia\n16988\n    Africa\n11506\n    North America\n9390\n    South America\n6795\n    Antarctica\n5500\n    Europe\n3745\n    Australia\n2968\n    Greenland\n840\n    New Guinea\n306\n    Borneo\n280\n  \n  \n  \n\n\n\n\nAgregamos un título y un subtítulo y se visualiza así\n\ngt_tbl1 <- \n  gt_tbl |>\n  tab_header(\n    title = \"Grandes masas de tierra del mundo\",\n    subtitle = \"Top 10 de las más grandes\"\n  )\n\ngt_tbl1\n\n\n\n\n\n  \n    \n      Grandes masas de tierra del mundo\n    \n    \n      Top 10 de las más grandes\n    \n    \n      name\n      size\n    \n  \n  \n    Asia\n16988\n    Africa\n11506\n    North America\n9390\n    South America\n6795\n    Antarctica\n5500\n    Europe\n3745\n    Australia\n2968\n    Greenland\n840\n    New Guinea\n306\n    Borneo\n280\n  \n  \n  \n\n\n\n\nTambién podemos usar herramientas de MarkDown utilizando la función md()…. TOCA REVISARLO PORQUE NO ME FUNCIONA EL MD"
  },
  {
    "objectID": "Agregar Partes.html#stub-y-stub-head",
    "href": "Agregar Partes.html#stub-y-stub-head",
    "title": "2  Agregar partes a una tabla simple",
    "section": "2.3 Stub y Stub Head",
    "text": "2.3 Stub y Stub Head"
  },
  {
    "objectID": "Agregar Partes.html#column-labels",
    "href": "Agregar Partes.html#column-labels",
    "title": "2  Agregar partes a una tabla simple",
    "section": "2.4 Column labels",
    "text": "2.4 Column labels"
  },
  {
    "objectID": "Agregar Partes.html#table-footer",
    "href": "Agregar Partes.html#table-footer",
    "title": "2  Agregar partes a una tabla simple",
    "section": "2.2 Table footer",
    "text": "2.2 Table footer\nAhora le vamos a incluir referencias y algunas notas en ciertas columnas, para eso usaremos la función tab_source_note\n\ngt_tbl2 <- \n  gt_tbl1 |>\n  tab_source_note(\n    source_note = \"Recurso: The World Almanac and Book of Facts, 1975, página 406.\"\n  ) |>\n  tab_source_note(\n    source_note = \"Referencia: McNeil, D. R. (1977) Interactive Data Analysis. Wiley.\"\n  )\n\ngt_tbl2\n\n\n\n\n\n  \n    \n      Grandes masas de tierra del mundo\n    \n    \n      Top 10 de las más grandes\n    \n    \n      name\n      size\n    \n  \n  \n    Asia\n16988\n    Africa\n11506\n    North America\n9390\n    South America\n6795\n    Antarctica\n5500\n    Europe\n3745\n    Australia\n2968\n    Greenland\n840\n    New Guinea\n306\n    Borneo\n280\n  \n  \n    \n      Recurso: The World Almanac and Book of Facts, 1975, página 406.\n    \n    \n      Referencia: McNeil, D. R. (1977) Interactive Data Analysis. Wiley.\n    \n  \n  \n\n\n\n\nAhora agregamos una nota al pie de página con la función tab_footnote(), también es necesario usar la función cells_bodypara especificar el lugar en el que irá el pequeño número que dirige al lector de la tabla a la nota al pie de página.\nHay varias formas de especificar los argumentos rows y columns de cells_body(), estas son:\n\nUn vector de nombres de columnas o nombres de filas\nUn vector con índices de columnas o de filas\nUsando la función de selección c()\nUsando una de las funciones starts_with(), ends_with(), contains(), matches(), one_of(), y everything().\n\nEn nuestro ejemplo, en las filas donde “name” es “North America” y “South America” pondremos una nota al pie de página que diga “América”. Para eso, especificamos que el número se debe ubicar en la columna “name” (columns=name) en las filas \\(3\\) y \\(4\\) (rows=3:4).\n\ngt_tbl3 <- \n  gt_tbl2 |>\n  tab_footnote(\n    footnote = \"América.\",\n    locations = cells_body(columns = name, rows = 3:4)\n  )\n\ngt_tbl3\n\n\n\n\n\n  \n    \n      Grandes masas de tierra del mundo\n    \n    \n      Top 10 de las más grandes\n    \n    \n      name\n      size\n    \n  \n  \n    Asia\n16988\n    Africa\n11506\n    North America1\n9390\n    South America1\n6795\n    Antarctica\n5500\n    Europe\n3745\n    Australia\n2968\n    Greenland\n840\n    New Guinea\n306\n    Borneo\n280\n  \n  \n    \n      Recurso: The World Almanac and Book of Facts, 1975, página 406.\n    \n    \n      Referencia: McNeil, D. R. (1977) Interactive Data Analysis. Wiley.\n    \n  \n  \n    \n      1 América.\n    \n  \n\n\n\n\nTambién es posible filtrar las filas o columnas usando los operadores usuales “\\(==\\)”,“\\(>\\)” y “\\(<\\)”. En nuestro ejemplo, agreguemos la nota al pie de página para aquellas filas donde size es mayor a \\(6000\\) y menor a \\(16000\\), así\n\ngt_tbl4 <- \n  gt_tbl2 |>\n  tab_footnote(\n    footnote = \"size (tamaño) es mayor que 6000 y menor que 16000\",\n    locations = cells_body(columns = name, rows = size>6000 & size<16000)\n  )\n\ngt_tbl4\n\n\n\n\n\n  \n    \n      Grandes masas de tierra del mundo\n    \n    \n      Top 10 de las más grandes\n    \n    \n      name\n      size\n    \n  \n  \n    Asia\n16988\n    Africa1\n11506\n    North America1\n9390\n    South America1\n6795\n    Antarctica\n5500\n    Europe\n3745\n    Australia\n2968\n    Greenland\n840\n    New Guinea\n306\n    Borneo\n280\n  \n  \n    \n      Recurso: The World Almanac and Book of Facts, 1975, página 406.\n    \n    \n      Referencia: McNeil, D. R. (1977) Interactive Data Analysis. Wiley.\n    \n  \n  \n    \n      1 size (tamaño) es mayor que 6000 y menor que 16000\n    \n  \n\n\n\n\nPor defecto, se pone un número pequeño para hacer referencia al pie de página, sin embargo, podemos modificarlo usando opt_footnote_marks()\n\ngt_tbl4 <- \n  gt_tbl2 |>\n  tab_footnote(\n    footnote = \"size (tamaño) es mayor que 6000 y menor que 16000\",\n    locations = cells_body(columns = name, rows = size>6000 & size<16000)\n  ) |>\nopt_footnote_marks(marks = c(\"*\", \"+\"))\n\ngt_tbl4\n\n\n\n\n\n  \n    \n      Grandes masas de tierra del mundo\n    \n    \n      Top 10 de las más grandes\n    \n    \n      name\n      size\n    \n  \n  \n    Asia\n16988\n    Africa*\n11506\n    North America*\n9390\n    South America*\n6795\n    Antarctica\n5500\n    Europe\n3745\n    Australia\n2968\n    Greenland\n840\n    New Guinea\n306\n    Borneo\n280\n  \n  \n    \n      Recurso: The World Almanac and Book of Facts, 1975, página 406.\n    \n    \n      Referencia: McNeil, D. R. (1977) Interactive Data Analysis. Wiley.\n    \n  \n  \n    \n      * size (tamaño) es mayor que 6000 y menor que 16000\n    \n  \n\n\n\n\nFinalmente, cabe mencionar que es posible agregar cuantas referencias y notas al pie de página se desee. Las otras funciones cells_*() permiten agregar la nota al pie de página en otras partes de la tabla como títulos, subtítulos, stubs, entre otras. Puede encontrar información más detallada de las funciones cells_*() del paquete gt aquí"
  },
  {
    "objectID": "Agregar Partes.html#stub",
    "href": "Agregar Partes.html#stub",
    "title": "2  Agregar partes a una tabla simple",
    "section": "2.3 Stub",
    "text": "2.3 Stub\nUn Stub es la parte izquierda de la fila donde se encuentran los nombres de las filas o los nombres de los grupos de filas. El término Stub Head hace referencia al “título” de los stubs de la tabla.\nEn la librería gt es necesario especificar cuál es la columna que tiene los “nombres” de las filas. En nuestro ejemplo, el tibble islands_tbl tiene DOS columnas, debemos especificar que la columna names tiene los nombres de las filas y a partir de ella formaremos los stubs, y que la columna size es la única columna, esto lo hacemos con la función gt() y el argumento rowname_col así\n\ngt_tbl5 <- \n  islands_tbl |>\n  gt(rowname_col = \"name\")\n\ngt_tbl5\n\n\n\n\n\n  \n    \n    \n      \n      size\n    \n  \n  \n    Asia\n16988\n    Africa\n11506\n    North America\n9390\n    South America\n6795\n    Antarctica\n5500\n    Europe\n3745\n    Australia\n2968\n    Greenland\n840\n    New Guinea\n306\n    Borneo\n280\n  \n  \n  \n\n\n\n\nAhor sí podemos formar los grupos de filas y asignar los stubs. Iniciamos con el stub head al que llamaremos “Masa terrestre” con la función tab_stubhead() así\n\ngt_tbl6 <- \n  gt_tbl5 |>\n  tab_stubhead(label = \"Masa terrestre\")\n\ngt_tbl6\n\n\n\n\n\n  \n    \n    \n      Masa terrestre\n      size\n    \n  \n  \n    Asia\n16988\n    Africa\n11506\n    North America\n9390\n    South America\n6795\n    Antarctica\n5500\n    Europe\n3745\n    Australia\n2968\n    Greenland\n840\n    New Guinea\n306\n    Borneo\n280\n  \n  \n  \n\n\n\n\nA continuación, agrupamos las filas y asignamos el correspondiente stub con la función tab_row_group()\n\ngt_tbl7 <- \n  gt_tbl6 |> \n  tab_row_group(\n    label = \"Continente\",\n    rows = 1:6\n  ) |>\n  tab_row_group(\n    label = \"País\",\n    rows = c(\"Australia\", \"Greenland\")\n  ) |>\n  tab_row_group(\n    label = \"Subregión\",\n    rows = c(\"New Guinea\", \"Borneo\")\n  )\n\ngt_tbl7\n\n\n\n\n\n  \n    \n    \n      Masa terrestre\n      size\n    \n  \n  \n    \n      Subregión\n    \n    New Guinea\n306\n    Borneo\n280\n    \n      País\n    \n    Australia\n2968\n    Greenland\n840\n    \n      Continente\n    \n    Asia\n16988\n    Africa\n11506\n    North America\n9390\n    South America\n6795\n    Antarctica\n5500\n    Europe\n3745\n  \n  \n  \n\n\n\n\nAhora agregamos los otros elementos de la tabla y nos queda\n\ngt_tbl8 <- \n  gt_tbl7 |> \n  tab_header(\n    title = \"Grandes masas de tierra del mundo\",\n    subtitle = \"Top 10 de las más grandes\"\n  ) |>\n  tab_source_note(\n    source_note = \"Recurso: The World Almanac and Book of Facts, 1975, página 406.\"\n  ) |>\n  tab_source_note(\n    source_note = \"Referencia: McNeil, D. R. (1977) Interactive Data Analysis. Wiley.\"\n  ) |>\n  tab_footnote(\n    footnote = \"size (tamaño) es mayor que 6000 y menor que 16000\",\n    locations = cells_body(columns = size, rows = size>6000 & size<16000)\n  ) |>\nopt_footnote_marks(marks = c(\"*\", \"+\"))\n\ngt_tbl8\n\n\n\n\n\n  \n    \n      Grandes masas de tierra del mundo\n    \n    \n      Top 10 de las más grandes\n    \n    \n      Masa terrestre\n      size\n    \n  \n  \n    \n      Subregión\n    \n    New Guinea\n306\n    Borneo\n280\n    \n      País\n    \n    Australia\n2968\n    Greenland\n840\n    \n      Continente\n    \n    Asia\n16988\n    Africa\n* 11506\n    North America\n* 9390\n    South America\n* 6795\n    Antarctica\n5500\n    Europe\n3745\n  \n  \n    \n      Recurso: The World Almanac and Book of Facts, 1975, página 406.\n    \n    \n      Referencia: McNeil, D. R. (1977) Interactive Data Analysis. Wiley.\n    \n  \n  \n    \n      * size (tamaño) es mayor que 6000 y menor que 16000\n    \n  \n\n\n\n\nOtra forma, tal vez un poco más sencilla, para generar los stubs es cuando en la base de datos original existe una columna con los nombres de los grupos de las filas, en el ejemplo, que en islands_tbl existiera la columna nombre_grupos donde aparecen Subregión, Continente y País, de modo que no sería necesario usar la función tab_row_group() para formar cada grupo, sino que simplemente usaríamos el siguiente fragmento del código: “gt(islands_tbl, rowname_col = \"name\", groupname_col = \"nombre_grupos\") |> ...”."
  },
  {
    "objectID": "Agregar Partes.html#título-y-subtítulo-table-header",
    "href": "Agregar Partes.html#título-y-subtítulo-table-header",
    "title": "2  Agregar partes a una tabla simple",
    "section": "2.1 Título y subtítulo (Table header)",
    "text": "2.1 Título y subtítulo (Table header)\nPara agregar un encabezado a nuestra tabla usamos la función tab_header() y así podemos incluir títulos y subtítulos de ser necesario.\nAntes nuestra tabla se veía así\n\n\n\n\n\n\n\n  \n    \n    \n      Nombre\n      Tamaño\n    \n  \n  \n    Asia\n16988\n    Africa\n11506\n    North America\n9390\n    South America\n6795\n    Antarctica\n5500\n    Europe\n3745\n    Australia\n2968\n    Greenland\n840\n    New Guinea\n306\n    Borneo\n280\n  \n  \n  \n\n\nFigura 2.1: Tabla básica de islands\n\n\n\nAgregamos un título y un subtítulo, y Figura 2.1 se visualiza así\n\ngt_tbl1 <- \n  gt_tbl |>\n  tab_header(\n    title = \"Grandes masas de tierra del mundo\",\n    subtitle = \"Top 10 de las más grandes\"\n  ) \n\n# Visualizamos la tabla\ngt_tbl1\n\n\n\n\n\n\n  \n    \n      Grandes masas de tierra del mundo\n    \n    \n      Top 10 de las más grandes\n    \n    \n      Nombre\n      Tamaño\n    \n  \n  \n    Asia\n16988\n    Africa\n11506\n    North America\n9390\n    South America\n6795\n    Antarctica\n5500\n    Europe\n3745\n    Australia\n2968\n    Greenland\n840\n    New Guinea\n306\n    Borneo\n280\n  \n  \n  \n\n\nFigura 2.2: Agregar un título y un subtítulo a la tabla\n\n\n\nPara personalizar nuestro libro es posible utilizar la función tab_style() y usaremos la función de ayuda cell_text() para, por ejemplo, cambiar el tipo de letra de toda la columna Nombre a itálica. Para esto agregamos al código anterior:\n\ngt_tbl1 <- \n  gt_tbl1 |>\n  tab_style(\n    style = cell_text(style = \"italic\"), # Indicamos que queremos que la letra sea itálica\n    locations = cells_body(\n      columns = Nombre # Indicamos la columna en la que se desea estilizar la letra\n  ))\n\n# Visualizamos la tabla\ngt_tbl1\n\n\n\n\n\n  \n    \n      Grandes masas de tierra del mundo\n    \n    \n      Top 10 de las más grandes\n    \n    \n      Nombre\n      Tamaño\n    \n  \n  \n    Asia\n16988\n    Africa\n11506\n    North America\n9390\n    South America\n6795\n    Antarctica\n5500\n    Europe\n3745\n    Australia\n2968\n    Greenland\n840\n    New Guinea\n306\n    Borneo\n280\n  \n  \n  \n\n\nModificación del estilo de letra de la columna nombres\n\n\nEs posible personalizar aún más el estilo de la tabla y agregarle muchas más cosas usando las funciones de referencia (?sec-funcref)."
  },
  {
    "objectID": "Agregar Partes.html#referencias-y-notas-al-pie-de-página-table-footer",
    "href": "Agregar Partes.html#referencias-y-notas-al-pie-de-página-table-footer",
    "title": "2  Agregar partes a una tabla simple",
    "section": "2.2 Referencias y notas al pie de página (Table footer)",
    "text": "2.2 Referencias y notas al pie de página (Table footer)\nAhora le vamos a incluir referencias y algunas notas en ciertas columnas, para eso usaremos la función tab_source_note\n\ngt_tbl2 <- \n  gt_tbl1 |>\n  tab_source_note(\n    source_note = \"Recurso: The World Almanac and Book of Facts, 1975, página 406.\"\n  ) |>\n  tab_source_note(\n    source_note = \"Referencia: McNeil, D. R. (1977) Interactive Data Analysis. Wiley.\"\n  )\n\n# Visualizamos la tabla\ngt_tbl2\n\n\n\n\n\n  \n    \n      Grandes masas de tierra del mundo\n    \n    \n      Top 10 de las más grandes\n    \n    \n      Nombre\n      Tamaño\n    \n  \n  \n    Asia\n16988\n    Africa\n11506\n    North America\n9390\n    South America\n6795\n    Antarctica\n5500\n    Europe\n3745\n    Australia\n2968\n    Greenland\n840\n    New Guinea\n306\n    Borneo\n280\n  \n  \n    \n      Recurso: The World Almanac and Book of Facts, 1975, página 406.\n    \n    \n      Referencia: McNeil, D. R. (1977) Interactive Data Analysis. Wiley.\n    \n  \n  \n\n\nAgregar una referencia a la tabla\n\n\nAhora agregamos una nota al pie de página con la función tab_footnote(), también es necesario usar la función cells_bodypara especificar el lugar en el que irá el pequeño número que dirige al lector de la tabla a la nota al pie de página.\nHay varias formas de especificar los argumentos rows y columns de cells_body(), estas son:\n\nUn vector de nombres de columnas o nombres de filas\nUn vector con índices de columnas o de filas\nUsando la función de selección c()\nUsando una de las funciones starts_with(), ends_with(), contains(), matches(), one_of(), y everything().\n\nEn nuestro ejemplo, en las filas donde “name” es “North America” y “South America” pondremos una nota al pie de página que diga “América”. Para eso, especificamos que el número se debe ubicar en la columna “name” (columns=name) en las filas \\(3\\) y \\(4\\) (rows=3:4).\n\ngt_tbl3 <- \n  gt_tbl2 |>\n  tab_footnote(\n    footnote = \"América.\",\n    locations = cells_body(columns = Nombre, rows = 3:4)\n  )\n\n# Visualizamos la tabla\ngt_tbl3\n\n\n\n\n\n  \n    \n      Grandes masas de tierra del mundo\n    \n    \n      Top 10 de las más grandes\n    \n    \n      Nombre\n      Tamaño\n    \n  \n  \n    Asia\n16988\n    Africa\n11506\n    North America1\n9390\n    South America1\n6795\n    Antarctica\n5500\n    Europe\n3745\n    Australia\n2968\n    Greenland\n840\n    New Guinea\n306\n    Borneo\n280\n  \n  \n    \n      Recurso: The World Almanac and Book of Facts, 1975, página 406.\n    \n    \n      Referencia: McNeil, D. R. (1977) Interactive Data Analysis. Wiley.\n    \n  \n  \n    \n      1 América.\n    \n  \n\n\nAgregar una nota al pie de página a la tabla\n\n\nTambién es posible filtrar las filas o columnas usando los operadores usuales “\\(==\\)”,“\\(>\\)” y “\\(<\\)”. En nuestro ejemplo, agreguemos la nota al pie de página para aquellas filas donde size es mayor a \\(6000\\) y menor a \\(16000\\), así\n\ngt_tbl4 <- \n  gt_tbl2 |>\n  tab_footnote(\n    footnote = \"El tamaño es mayor que 6000 y menor que 16000\",\n    locations = cells_body(columns = Nombre, rows = Tamaño>6000 & Tamaño<16000)\n  )\n\n# Visualizamos la tabla\ngt_tbl4\n\n\n\n\n\n  \n    \n      Grandes masas de tierra del mundo\n    \n    \n      Top 10 de las más grandes\n    \n    \n      Nombre\n      Tamaño\n    \n  \n  \n    Asia\n16988\n    Africa1\n11506\n    North America1\n9390\n    South America1\n6795\n    Antarctica\n5500\n    Europe\n3745\n    Australia\n2968\n    Greenland\n840\n    New Guinea\n306\n    Borneo\n280\n  \n  \n    \n      Recurso: The World Almanac and Book of Facts, 1975, página 406.\n    \n    \n      Referencia: McNeil, D. R. (1977) Interactive Data Analysis. Wiley.\n    \n  \n  \n    \n      1 El tamaño es mayor que 6000 y menor que 16000\n    \n  \n\n\nAgregar una nota al pie de página a la tabla, usando filtros en la localización\n\n\nPor defecto, se pone un número pequeño para hacer referencia al pie de página, sin embargo, podemos modificarlo usando opt_footnote_marks()\n\ngt_tbl4 <- \n  gt_tbl2 |>\n  tab_footnote(\n    footnote = \"El tamaño es mayor que 6000 y menor que 16000\",\n    locations = cells_body(columns = Nombre, rows = Tamaño>6000 & Tamaño<16000)\n  ) |>\nopt_footnote_marks(marks = c(\"*\", \"+\"))\n\n# Visualizamos la tabla\ngt_tbl4\n\n\n\n\n\n  \n    \n      Grandes masas de tierra del mundo\n    \n    \n      Top 10 de las más grandes\n    \n    \n      Nombre\n      Tamaño\n    \n  \n  \n    Asia\n16988\n    Africa*\n11506\n    North America*\n9390\n    South America*\n6795\n    Antarctica\n5500\n    Europe\n3745\n    Australia\n2968\n    Greenland\n840\n    New Guinea\n306\n    Borneo\n280\n  \n  \n    \n      Recurso: The World Almanac and Book of Facts, 1975, página 406.\n    \n    \n      Referencia: McNeil, D. R. (1977) Interactive Data Analysis. Wiley.\n    \n  \n  \n    \n      * El tamaño es mayor que 6000 y menor que 16000\n    \n  \n\n\nModificación de las marks de la nota al pie de página\n\n\nFinalmente, cabe mencionar que es posible agregar cuantas referencias y notas al pie de página se desee. Las otras funciones cells_*() permiten agregar la nota al pie de página en otras partes de la tabla como títulos, subtítulos, stubs, entre otras. Puede encontrar información más detallada de las funciones cells_*() del paquete gt aquí"
  },
  {
    "objectID": "Agregar Partes.html#grupos-de-filas-stub",
    "href": "Agregar Partes.html#grupos-de-filas-stub",
    "title": "2  Agregar partes a una tabla simple",
    "section": "2.3 Grupos de filas (Stub)",
    "text": "2.3 Grupos de filas (Stub)\nUn Stub es la parte izquierda de la fila donde se encuentran los nombres de las filas o los nombres de los grupos de filas. El término Stub Head hace referencia al “título” de los stubs de la tabla.\nEn la librería gt es necesario especificar cuál es la columna que tiene los “nombres” de las filas. En nuestro ejemplo, el tibble islands_tbl tiene DOS columnas, debemos especificar que la columna Nombre tiene los nombres de las filas y a partir de ella formaremos los stubs, y que la columna size es la única columna, esto lo hacemos con la función gt() y el argumento rowname_col así\n\ngt_tbl5 <- \n  islands_tbl |>\n  gt(rowname_col = \"Nombre\")\n\ngt_tbl5\n\n\n\n\n\n\n  \n    \n    \n      \n      Tamaño\n    \n  \n  \n    Asia\n16988\n    Africa\n11506\n    North America\n9390\n    South America\n6795\n    Antarctica\n5500\n    Europe\n3745\n    Australia\n2968\n    Greenland\n840\n    New Guinea\n306\n    Borneo\n280\n  \n  \n  \n\n\nFigura 2.3: Tabla con a columna Nombre como stub\n\n\n\nSin embargo, tal como podemos observar en Figura 2.3, la letra de la columna nombres ya no es itálica, de modo que hemos perdido el estilo que dimos en ?fig-italica.Ahora sí podemos formar los grupos de filas y asignar los stubs. Iniciamos con el stub head al que llamaremos “Masa terrestre” con la función tab_stubhead() así\n\ngt_tbl6 <- \n  gt_tbl5 |>\n  tab_stubhead(label = \"Masa terrestre\")\n\ngt_tbl6\n\n\n\n\n\n  \n    \n    \n      Masa terrestre\n      Tamaño\n    \n  \n  \n    Asia\n16988\n    Africa\n11506\n    North America\n9390\n    South America\n6795\n    Antarctica\n5500\n    Europe\n3745\n    Australia\n2968\n    Greenland\n840\n    New Guinea\n306\n    Borneo\n280\n  \n  \n  \n\n\nTabla con un nombre para los stubs\n\n\nA continuación, agrupamos las filas y asignamos el correspondiente stub con la función tab_row_group()\n\ngt_tbl7 <- \n  gt_tbl6 |> \n  tab_row_group(\n    label = \"Continente\",\n    rows = 1:6\n  ) |>\n  tab_row_group(\n    label = \"País\",\n    rows = c(\"Australia\", \"Greenland\")\n  ) |>\n  tab_row_group(\n    label = \"Subregión\",\n    rows = c(\"New Guinea\", \"Borneo\")\n  )\n\n# Visualizamos la tabla\ngt_tbl7\n\n\n\n\n\n  \n    \n    \n      Masa terrestre\n      Tamaño\n    \n  \n  \n    \n      Subregión\n    \n    New Guinea\n306\n    Borneo\n280\n    \n      País\n    \n    Australia\n2968\n    Greenland\n840\n    \n      Continente\n    \n    Asia\n16988\n    Africa\n11506\n    North America\n9390\n    South America\n6795\n    Antarctica\n5500\n    Europe\n3745\n  \n  \n  \n\n\n\n\nAhora agregamos los otros elementos de la tabla y nos queda\n\ngt_tbl8 <- \n  gt_tbl7 |> \n  tab_header(\n    title = \"Grandes masas de tierra del mundo\",\n    subtitle = \"Top 10 de las más grandes\"\n  ) |>\n  tab_source_note(\n    source_note = \"Recurso: The World Almanac and Book of Facts, 1975, página 406.\"\n  ) |>\n  tab_source_note(\n    source_note = \"Referencia: McNeil, D. R. (1977) Interactive Data Analysis. Wiley.\"\n  ) |>\n  tab_footnote(\n    footnote = \"El tamaño es mayor que 6000 y menor que 16000\",\n    locations = cells_body(columns = Tamaño, rows = Tamaño>6000 & Tamaño<16000)\n  ) |>\nopt_footnote_marks(marks = c(\"*\", \"+\"))\n\n# Visualizamos la tabla\ngt_tbl8\n\n\n\n\n\n  \n    \n      Grandes masas de tierra del mundo\n    \n    \n      Top 10 de las más grandes\n    \n    \n      Masa terrestre\n      Tamaño\n    \n  \n  \n    \n      Subregión\n    \n    New Guinea\n306\n    Borneo\n280\n    \n      País\n    \n    Australia\n2968\n    Greenland\n840\n    \n      Continente\n    \n    Asia\n16988\n    Africa\n* 11506\n    North America\n* 9390\n    South America\n* 6795\n    Antarctica\n5500\n    Europe\n3745\n  \n  \n    \n      Recurso: The World Almanac and Book of Facts, 1975, página 406.\n    \n    \n      Referencia: McNeil, D. R. (1977) Interactive Data Analysis. Wiley.\n    \n  \n  \n    \n      * El tamaño es mayor que 6000 y menor que 16000\n    \n  \n\n\n\n\nOtra forma, tal vez un poco más sencilla, para generar los stubs es cuando en la base de datos original existe una columna con los nombres de los grupos de las filas, en el ejemplo, que en islands_tbl existiera la columna nombre_grupos donde aparecen Subregión, Continente y País, de modo que no sería necesario usar la función tab_row_group() para formar cada grupo, sino que simplemente usaríamos el siguiente fragmento del código: “gt(islands_tbl, rowname_col = \"name\", groupname_col = \"nombre_grupos\") |> ...”."
  },
  {
    "objectID": "Agregar Partes.html#grupos-de-columnas-spanner",
    "href": "Agregar Partes.html#grupos-de-columnas-spanner",
    "title": "2  Agregar partes a una tabla simple",
    "section": "2.4 Grupos de columnas (Spanner)",
    "text": "2.4 Grupos de columnas (Spanner)\nAsí como en la sección anterior hicimos grupos de filas y les pusimos nombres a dichos gurpos, también es posible crear grupos de filas y asignarles títulos utilizando la función tab_spanner(), dichos grupos se conocen como Spanner.\nPara mostrar un ejemplo, usaremos los datos disponibles en airquality , esta base de datos tiene registro del día, mes y las mediciones de la calidad del aire en Nueva York de 153 días entre Mayo a Septiembre de 1973, tiene variables como ozono, radiación solar, temperatura, entre otras. Para ilustrar el uso de la función tab_stanner(), vamos a crear dos grupos de columnas, uno asociado a las mediciones (ozono, radiación solar, temperatura, …) y otro relacionado con la fecha de registro.\n\n# Primero vamos a cambiar a español los nombres de las variables de la base de datos \"airquality\"\ncalidad_aire<-airquality |>\n  slice(1:10)\n\nnames(calidad_aire)<-c(\"Ozono\",\"R.Solar\",\"Viento\",\"Temp\",\"Mes\",\"Día\")\n\n# Creamos la tabla con gt\ngt_tbl_air <- \n  gt(calidad_aire) |>\n  tab_header(\n    title = \"Mediciones de la calidad del aire en Nueva York\",\n    subtitle = \"Mediciones diarias en Nueva York de mayo a septiembre de 1973\"\n  ) |>\n  # Aquí creamos el primer grupo de columnas refererentes a la fecha\n  tab_spanner(\n    label = \"Fecha\", # Agregamos el título del grupo de columnas\n    columns = c(Mes, Día) # Seleccionamos las columnas que se van a agrupar en \"Fecha\"\n  ) |>\n  tab_spanner(\n    label = \"Mediciones\",\n    columns = c(Ozono, R.Solar, Viento, Temp)\n  )\n\n# Visualizamos la tabla\ngt_tbl_air\n\n\n\n\n\n  \n    \n      Mediciones de la calidad del aire en Nueva York\n    \n    \n      Mediciones diarias en Nueva York de mayo a septiembre de 1973\n    \n    \n      \n        Mediciones\n      \n      \n        Fecha\n      \n    \n    \n      Ozono\n      R.Solar\n      Viento\n      Temp\n      Mes\n      Día\n    \n  \n  \n    41\n190\n7.4\n67\n5\n1\n    36\n118\n8.0\n72\n5\n2\n    12\n149\n12.6\n74\n5\n3\n    18\n313\n11.5\n62\n5\n4\n    NA\nNA\n14.3\n56\n5\n5\n    28\nNA\n14.9\n66\n5\n6\n    23\n299\n8.6\n65\n5\n7\n    19\n99\n13.8\n59\n5\n8\n    8\n19\n20.1\n61\n5\n9\n    NA\n194\n8.6\n69\n5\n10\n  \n  \n  \n\n\n\n\nLa librería gt nos permite cambiar de posición la disposición de las columnas, así como también modificar los nombres de las columnas. Para cambiar de posición se puede usar la función cols_move_to_*(), y para los nombres de las columnas cols_label(). Por ejemplo, vamos a mover todas las variables relacionadas con Fecha al comiezo de la tabla (a la izquierda), y vamos a agregar las unidades de medida al nombre de las columnas.\n\ngt_tbl_air_2 <- \n  gt_tbl_air |>\n  cols_move_to_start(\n    columns = c(Mes, Día)\n  ) |>\n  cols_label(\n    Ozono = html(\"Ozono,<br>ppbV\"),\n    R.Solar = html(\"R.Solar,<br>cal/m<sup>2</sup>\"),\n    Viento = html(\"Viento,<br>mph\"),\n    Temp = html(\"Temp,<br>&deg;F\")\n  )\n\n# Visualización de la tabla \ngt_tbl_air_2\n\n\n\n\n\n  \n    \n      Mediciones de la calidad del aire en Nueva York\n    \n    \n      Mediciones diarias en Nueva York de mayo a septiembre de 1973\n    \n    \n      \n        Fecha\n      \n      \n        Mediciones\n      \n    \n    \n      Mes\n      Día\n      Ozono,ppbV\n      R.Solar,cal/m2\n      Viento,mph\n      Temp,°F\n    \n  \n  \n    5\n1\n41\n190\n7.4\n67\n    5\n2\n36\n118\n8.0\n72\n    5\n3\n12\n149\n12.6\n74\n    5\n4\n18\n313\n11.5\n62\n    5\n5\nNA\nNA\n14.3\n56\n    5\n6\n28\nNA\n14.9\n66\n    5\n7\n23\n299\n8.6\n65\n    5\n8\n19\n99\n13.8\n59\n    5\n9\n8\n19\n20.1\n61\n    5\n10\nNA\n194\n8.6\n69\n  \n  \n  \n\n\n\n\nEs considerablemente grande la cantidad de cosas que podemos agregar a nuestra tabla. En este capítulo (Capítulo 2) vimos cómo agregar partes “básicas” a la tabla. Pero también podemos agregar muchas más cosas usando las funciones de referencia que puedes estudiar en ?sec-funcref."
  },
  {
    "objectID": "Referencias.html",
    "href": "Referencias.html",
    "title": "Referencias",
    "section": "",
    "text": "n.d. R. https://search.r-project.org/CRAN/refmans/gt/html/gt.html.\n\n\nIannone, Richard, Joe Cheng, Barret Schloerke, Ellis Hughes, Alexandra\nLauer, and JooYoung Seo. n.d. “Easily Create Presentation-Ready\nDisplay Tables.” Easily Create Presentation-Ready Display\nTables • Gt. https://gt.rstudio.com/.\n\n\nMock, Tom. n.d. “GT Cookbook - Advanced.” The\nMockUp. https://themockup.blog/static/resources/gt-cookbook-advanced.html.\n\n\nRapp, Albert. 2022. “Creating Beautiful Tables in r with\nGT.” Creating Beautiful Tables in R with\nGt. https://gt.albert-rapp.de/."
  },
  {
    "objectID": "gt avanzado.html#personalización-con-css",
    "href": "gt avanzado.html#personalización-con-css",
    "title": "4  Funciones de gt avanzadas",
    "section": "4.1 Personalización con CSS",
    "text": "4.1 Personalización con CSS\nEl paquete gt tiene la función opt_css que nos permite personalizar la tabla aplicando nuestro propio CSS. Para visualizar esto, vamos a crear una tabla usando la base de datos exibble disponible en R, modificaremos el color de fondo de la tabla (one .gt_table {background-color:}), el espacio de cada para fila de la gráfica (#one .gt_row {padding:}), haremos que los títulos de las columnas se vean centrados (#one .gt_col_heading {text-align:}) y también que cambie el color de fondo de una fila cuando pongamos el mouse sobre ella (#one tr:hover {background-color:})\n\nsuppressMessages(library(gt))\nsuppressMessages(library(dplyr))\n\nexibble %>%\n  dplyr::select(num, currency) %>%\n  gt(id = \"one\") %>% \n  fmt_currency(\n    columns = vars(currency),\n    currency = \"HKD\"\n  ) %>%\n  fmt_scientific(\n    columns = vars(num)\n  ) %>%\n  opt_css(\n    css = \"\n    #one .gt_table { \n      background-color: skyblue;\n    }\n    #one .gt_row {\n      padding: 20px 30px;\n    }\n    #one tr:hover {\n    background-color: #f5f8ff;\n    }\n    #one .gt_col_heading {\n      text-align: center !important;\n    }\n    \"\n  )\n\n\n\n\n\n  \n    \n    \n      num\n      currency\n    \n  \n  \n    1.11 × 10−1\nHK$49.95\n    2.22\nHK$17.95\n    3.33 × 101\nHK$1.39\n    4.44 × 102\nHK$65,100.00\n    5.55 × 103\nHK$1,325.81\n    NA\nHK$13.26\n    7.77 × 105\nNA\n    8.88 × 106\nHK$0.44\n  \n  \n  \n\n\n\n\n¡Quedó preciosa nuestra tabla! Puedes encontrar más opciones de CSS aquí."
  },
  {
    "objectID": "gt avanzado.html#insertar-urls",
    "href": "gt avanzado.html#insertar-urls",
    "title": "4  Funciones de gt avanzadas",
    "section": "4.2 Insertar URLs",
    "text": "4.2 Insertar URLs\nUtilizando lenguaje HTML podemos agregar URLs en nuestra tabla. Para ilustrarlo, vamos a crear una una tabla con tres sitios web y sus respectivas direcciones.\n\nlibrary(htmltools)\n\n# Primero creamos la base de datos con los sitios y las direcciones\nex_sites <- data.frame(\n  Dirección = c(\"https://gmail.com\", \"https://youtube.com\", \"https://es.duolingo.com/\"),\n  Sitio = c(\"Gmail\", \"YouTube\", \"Duolingo\")\n)\n\n# Ahora si creamos la tabla\ngt(ex_sites) %>% \n  text_transform(\n    locations = cells_body(columns = vars(Dirección)), # Comenzamos editando la columna con las direcciones\n    fn = function(x) {\n      # la función map de purrr aplica una operación a cada elemento de x\n    purrr::map(x,  ~htmltools::tags$a(href = .x, target = \"_blank\", .x))\n      }\n  ) %>% # EXPLICAR ESTO\n  text_transform(\n    locations = cells_body(columns = vars(Sitio)),\n    fn = function(x) {\n    purrr::map2(\n      .x = x, .y = ex_sites$Dirección, \n      .f = ~glue::glue('<a href=\"{.y}\" target=\"_blank\">{.x}</a>'))\n      }\n  )\n\n\n\n\n\n  \n    \n    \n      Dirección\n      Sitio\n    \n  \n  \n    https://gmail.com\nGmail\n    https://youtube.com\nYouTube\n    https://es.duolingo.com/\nDuolingo"
  },
  {
    "objectID": "gt avanzado.html#opción-para-descargar-los-datos",
    "href": "gt avanzado.html#opción-para-descargar-los-datos",
    "title": "4  Funciones de gt avanzadas",
    "section": "4.3 Opción para descargar los datos",
    "text": "4.3 Opción para descargar los datos\nPodemos agregar opciones para que quien vea nuestra tabla tenga la opción de descargar los datos, esto es posible usando funciones de HTML y agregando una nota al pie de página con la función tab_source_note() de gt. Para ilustrarlo, vamos a presentar en una tabla los datos de mtcars dsiponibles en R; inicialmente crearemos un archivo .csv con la función write.csv2, luego usamos lenguaje HTML para crear un hipervínculo que descarge el archivo .csv, y finalmente agregamos dicho link como una nota al pie de página en la tabla.\n\nwrite.csv2(mtcars, \"./file.csv\")\n\nencoded <- readLines(\"./file.csv\") %>% # EXPLICAR ESTO\n  paste0(collapse=\"\\n\") %>% \n  openssl::base64_encode() -> encoded\n\nhtml_encode <- sprintf('data:text/csv;base64,%s', encoded)\nhtml_csv <- glue::glue(\n  \"<a download='mtcars.csv' href='{html_encode}'>CSV Download</a>\"\n  )\n\nhead(mtcars) %>% \n  gt() %>% \n  tab_source_note(html(html_csv))\n\n\n\n\n\n  \n    \n    \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n    \n  \n  \n    21.0\n6\n160\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\n    21.0\n6\n160\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\n    22.8\n4\n108\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\n    21.4\n6\n258\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n    18.7\n8\n360\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2\n    18.1\n6\n225\n105\n2.76\n3.460\n20.22\n1\n0\n3\n1\n  \n  \n    \n      CSV Download\n    \n  \n  \n\n\n\n\nTambién existe una manera más sencilla (sin utilizar lenguaje HTML) para agregar la opción de descargar los datos, solo necesitamos la librería “downloadthis”, veamos cómo, haciendo uso de nuestro ejemplo con mtcars.\n\nlibrary(downloadthis)\n\nhead(mtcars) %>%\n  gt() %>%\n  tab_source_note(\n    mtcars %>%\n      download_this(\n        output_name = \"mtcars\", # Cómo se llamará el archivo una vez descargado \n        output_extension = \".csv\", # El archivo es . csv, también puede ser .xlsx\n        button_label = \"Download csv\", # Cómo se llamará el botón\n        button_type = \"default\", # Tipo de botón, gtambién puede ser danger, warning, etc\n      )\n  )\n\n\n\n\n\n  \n    \n    \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n    \n  \n  \n    21.0\n6\n160\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\n    21.0\n6\n160\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\n    22.8\n4\n108\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\n    21.4\n6\n258\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n    18.7\n8\n360\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2\n    18.1\n6\n225\n105\n2.76\n3.460\n20.22\n1\n0\n3\n1\n  \n  \n    \n      \n   Download csv\n\n    \n  \n  \n\n\n\n\nCon la función download_this podemos personalizar más nuestro botón utilizando lenguaje CSS. Vamos a generar un botón que descargue un archivo .xlsx, de color rojo, letra de tipo “Serif” y borde color negro.\n\nattach_excel <- mtcars %>%\n  download_this(\n    output_name = \"mtcars\",\n    output_extension = \".xlsx\", # Excel file type\n    button_label = \"Download Excel\",\n    class = \"buttonExcel\"\n  )\n\nhead(mtcars) %>%\n  gt() %>%\n  opt_css(\n    css = \"\n    .buttonExcel{\n    font-size: 12px;\n    color: #fff;\n    background-color: red;\n    border-color: black;\n    font-family: serif;\n    font-weight: bold;\n    border-radius: 10px;\n    padding: 4px;\n    }\n    \n    .buttonExcel:hover,\n    .buttonExcel:active,\n    .buttonExcel:focus,\n    .buttonExcel.active {\n    background: grey;\n    color: #ffffff;\n    border-color: grey;\n    }\n    \"\n  ) %>% \n  tab_source_note(attach_excel)\n\n\n\n\n\n  \n    \n    \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n    \n  \n  \n    21.0\n6\n160\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\n    21.0\n6\n160\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\n    22.8\n4\n108\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\n    21.4\n6\n258\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n    18.7\n8\n360\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2\n    18.1\n6\n225\n105\n2.76\n3.460\n20.22\n1\n0\n3\n1\n  \n  \n    \n      \n   Download Excel\n\n    \n  \n  \n\n\n\n\nPara personalizar aún más nuestro botón o en general la opción para descargar los datos, puedes explorar Introduction to downloadthis"
  },
  {
    "objectID": "gt avanzado.html#agregar-gráficos",
    "href": "gt avanzado.html#agregar-gráficos",
    "title": "4  Funciones de gt avanzadas",
    "section": "4.9 Agregar gráficos",
    "text": "4.9 Agregar gráficos\nAntes, en Sección 4.4, vimos cómo incluir un sparkline a una tabla, ahora, agregaremos cualquier gráfico que sea creado con el paquete ggplot2. Cambiamos un poco de ejemplo, utilizamos los datos “penguins” disponibles en el paquete palmerpenguins, haremos una tabla para mostrar diferentes características de los pesos de los pinguinos según su especie, dentro de las características incluiremos un gráfico de violín.\n\nsuppressMessages(library(palmerpenguins))\nsuppressMessages(library(ggplot2))\nsuppressMessages(library(purrr))\n\n# Cargamos los datos\nfiltered_penguins <- palmerpenguins::penguins |>\n    filter(!is.na(sex))\n\n# Agrupamos por especie\npenguin_weights <- filtered_penguins |>\n  group_by(species) |>\n  summarise(\n    Min = min(body_mass_g),\n    Mean = mean(body_mass_g) |> round(digits = 2),\n    Max = max(body_mass_g)\n  ) |>\n  mutate(species = as.character(species)) |>\n  rename(Species = species)\n\n# Función para realizar los gráficos de violín\nplot_density_species <- function(my_species) {\n  full_range <- filtered_penguins |>\n  pull(body_mass_g) |>\n  range()\n    filtered_penguins |>\n    filter(species == my_species) |>\n    ggplot(aes(x = body_mass_g, y = species)) +\n    geom_violin(fill = 'dodgerblue4') +\n    theme_minimal() +\n    scale_y_discrete(breaks = NULL) +\n    scale_x_continuous(breaks = NULL) +\n    labs(x = element_blank(), y = element_blank()) +\n    coord_cartesian(xlim = full_range)\n}\n\n# Tabla con gt\npenguin_weights |>\n  mutate(Distribution = Species) |> \n  gt() |>\n  tab_spanner(\n    label = 'Penguin\\'s Weight',\n    columns = -Species\n  ) |>\n  text_transform(\n    locations = cells_body(columns = 'Distribution'),\n    fn = function(column) {\n      map(column, plot_density_species) |>\n        ggplot_image(height = px(50), aspect_ratio = 3)\n    }\n  ) \n\n\n\n\n\n  \n    \n    \n      Species\n      \n        Penguin's Weight\n      \n    \n    \n      Min\n      Mean\n      Max\n      Distribution\n    \n  \n  \n    Adelie\n2850\n3706.16\n4775\n\n    Chinstrap\n2700\n3733.09\n4800\n\n    Gentoo\n3950\n5092.44\n6300\n\n  \n  \n  \n\n\n\n\nPuedes consultar otro tipo de gráficos aquí para agregarlos a tu tabla."
  },
  {
    "objectID": "gt avanzado.html#agregar-tooltips",
    "href": "gt avanzado.html#agregar-tooltips",
    "title": "4  Funciones de gt avanzadas",
    "section": "4.5 Agregar tooltips",
    "text": "4.5 Agregar tooltips\nUn tooltip es una herramienta que de ayuda visual que funciona al posar el cursor sobre algún elemento gráfico y se encarga de informar al usuario respecto a dicho elemento. Inicialmente crearemos una función que genere el tooltip usando lenguaje HTML, y para agregar esta super herramienta a la tabla, vamos a modificar el nombre de las columnas con las funciones cols_label() y html(), ambas de gt.\n\nsuppressMessages(library(htmltools))\nwith_tooltip <- function(value, tooltip) {\n  tags$abbr(\n    style = \"text-decoration: underline;\n    text-decoration-style: solid; color: blue\",\n    title = tooltip,\n    value\n  ) %>% \n    as.character()\n}\n\nmtcars %>% \n  head() %>% \n  tibble::rownames_to_column() %>% \n  select(rowname, mpg:hp) %>% \n  gt() %>% \n   cols_label(\n    mpg = gt::html(with_tooltip(\"MPG\", \"Miles per Gallon\")),\n    cyl = gt::html(with_tooltip(\"CYL\", \"Number of Cylinders\")),\n    disp = gt::html(with_tooltip(\"DISP\", \"Displacement\")),\n    hp = gt::html(with_tooltip(\"HP\", \"Horsepower\")),\n  )\n\n\n\n\n\n  \n    \n    \n      \n      MPG\n      CYL\n      DISP\n      HP\n    \n  \n  \n    Mazda RX4\n21.0\n6\n160\n110\n    Mazda RX4 Wag\n21.0\n6\n160\n110\n    Datsun 710\n22.8\n4\n108\n93\n    Hornet 4 Drive\n21.4\n6\n258\n110\n    Hornet Sportabout\n18.7\n8\n360\n175\n    Valiant\n18.1\n6\n225\n105"
  },
  {
    "objectID": "gt avanzado.html#agregar-iconos",
    "href": "gt avanzado.html#agregar-iconos",
    "title": "4  Funciones de gt avanzadas",
    "section": "4.6 Agregar iconos",
    "text": "4.6 Agregar iconos"
  },
  {
    "objectID": "gt avanzado.html",
    "href": "gt avanzado.html",
    "title": "4  Funciones de gt avanzadas",
    "section": "",
    "text": "5 Estrellas para calificar"
  },
  {
    "objectID": "gt avanzado.html#gráficos-sparkline",
    "href": "gt avanzado.html#gráficos-sparkline",
    "title": "4  Funciones de gt avanzadas",
    "section": "4.4 Gráficos Sparkline",
    "text": "4.4 Gráficos Sparkline\nLos sparklines son gráficos muy pequeños que generalmente se dibujan sin ejes ni coordenadas, se usan para presentar la variación a lo largo del tiempo de cierta medida como la temperatura o algún precio. Crearemos una tabla que muestre un sparkline de drat (Rear axle ratio) para cada cyl (Number od cylinders), para ello, haremos uso de la función text_transform() donde indicaremos que se trata de un gráfico y modificaremos ciertos aspectos como los límites de los ejes.\n\nsuppressMessages(library(kableExtra))\n\nmtcars %>%\n  group_by(cyl) %>%\n  summarize(drat_data = list(drat), .groups = \"drop\") %>%\n  gt() %>%\n  text_transform(\n    locations = cells_body(columns = vars(drat_data)),\n    fn = function(x) {\n      data_in <- purrr::pluck(., \"_data\", \"drat_data\")\n      plot <- purrr::map(\n        data_in, ~ kableExtra::spec_plot(\n          .x, ylim = range(mtcars$drat), \n          same_lim = TRUE, width = 300, height = 70\n          )\n        )\n      \n      plot <- purrr::map_chr(plot, \"svg_text\")\n    }\n  )\n\n\n\n\n\n  \n    \n    \n      cyl\n      drat_data\n    \n  \n  \n    4\n\n\n  \n    \n  \n  \n  \n    \n      \n    \n  \n  \n    \n    \n    \n  \n\n\n    6\n\n\n  \n    \n  \n  \n  \n    \n      \n    \n  \n  \n    \n    \n    \n  \n\n\n    8"
  },
  {
    "objectID": "gt avanzado.html#agregar-íconos",
    "href": "gt avanzado.html#agregar-íconos",
    "title": "4  Funciones de gt avanzadas",
    "section": "4.6 Agregar íconos",
    "text": "4.6 Agregar íconos\nY ahora, es momento de agregar íconos. En R, existe el paquete fontawesome que, junto con la función fa(), permiten agregar uno o más íconos Font Awesome. Para adicionarlos en nuestra tabla, nuevamente usaremos la función text_transform() de gt, ubicamos la columna cyl con la función cells_body y ahora sí usamos lenguaje HTML y la función fa() para que aparezcan los camiones (truck,truck-pickup,truck-monster).\n\nsuppressMessages(library(htmltools))\nmtcars %>% \n  head() %>% \n  tibble::rownames_to_column() %>% \n  select(rowname, mpg:hp) %>%\n  gt() %>% \n  cols_label(\n    mpg = gt::html(with_tooltip(\"MPG\", \"Miles per Gallon\")),\n    cyl = gt::html(with_tooltip(\"CYL\", \"Number of Cylinders\")),\n    disp = gt::html(with_tooltip(\"DISP\", \"Displacement\")),\n    hp = gt::html(with_tooltip(\"HP\", \"Horsepower\")),\n  ) %>%\n  text_transform(\n    locations = cells_body(columns = vars(cyl), rows = cyl == 4),\n    fn = function(x){gt::html(fontawesome::fa(\"truck-pickup\", fill = \"blue\"))}\n  ) %>% \n  text_transform(\n    locations = cells_body(columns = vars(cyl), rows = cyl == 6),\n    fn = function(x){gt::html(fontawesome::fa(\"truck-moving\", fill = \"green\"))}\n  ) %>% \n  text_transform(\n    locations = cells_body(columns = vars(cyl), rows = cyl == 8),\n    fn = function(x){gt::html(fontawesome::fa(\"truck-monster\", fill = \"red\"))}\n  )\n\n\n\n\n\n  \n    \n    \n      \n      MPG\n      CYL\n      DISP\n      HP\n    \n  \n  \n    Mazda RX4\n21.0\n\n160\n110\n    Mazda RX4 Wag\n21.0\n\n160\n110\n    Datsun 710\n22.8\n\n108\n93\n    Hornet 4 Drive\n21.4\n\n258\n110\n    Hornet Sportabout\n18.7\n\n360\n175\n    Valiant\n18.1\n\n225\n105\n  \n  \n  \n\n\n\n\nNo solo puedes agregar carros a tus tablas, puedes agregar cualquier ícono de Font Awesome que esté aquí.\nTambién es posible incluir no solo uno sino varios íconos en la tabla, esto puede ser útil en algunos contextos, por ejemplo, para calificar ciertas cosas. A nuestro ejemplo en Sección 4.3, vamos a agregarle un rating con estrellas, para ello crearemos una función, rating_stars(), que se encarga de colorear las estrellas dependiendo del rating.\n\nrating_stars <- function(rating, max_rating = 5) {\n  rounded_rating <- floor(rating + 0.5)  # always round up\n  stars <- lapply(seq_len(max_rating), function(i) {\n    if (i <= rounded_rating) fontawesome::fa(\"star\", fill= \"orange\") else fontawesome::fa(\"star\", fill= \"grey\")\n  })\n  label <- sprintf(\"%s out of %s\", rating, max_rating)\n  div_out <- htmltools::div(title = label, \"aria-label\" = label, role = \"img\", stars)\n  \n  as.character(div_out) %>% \n    gt::html()\n}\n\nmtcars %>% \n  slice(1:5) %>% \n  mutate(rating = purrr::map(sample(1:5, size = 5, TRUE), rating_stars)) %>% \n  gt()\n\n\n\n\n\n  \n    \n    \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n      rating\n    \n  \n  \n    21.0\n6\n160\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\n\n  \n  \n  \n  \n  \n\n    21.0\n6\n160\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\n\n  \n  \n  \n  \n  \n\n    22.8\n4\n108\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\n\n  \n  \n  \n  \n  \n\n    21.4\n6\n258\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n\n  \n  \n  \n  \n  \n\n    18.7\n8\n360\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2"
  },
  {
    "objectID": "gt avanzado.html#estrellas-para-calificar",
    "href": "gt avanzado.html#estrellas-para-calificar",
    "title": "4  Funciones de gt avanzadas",
    "section": "4.7 Estrellas para calificar",
    "text": "4.7 Estrellas para calificar\n\n# note you could use ANY font-awesome logo\n# https://fontawesome.com/cheatsheet\nrating_stars <- function(rating, max_rating = 5) {\n  rounded_rating <- floor(rating + 0.5)  # always round up\n  stars <- lapply(seq_len(max_rating), function(i) {\n    if (i <= rounded_rating) fontawesome::fa(\"star\", fill= \"orange\") else fontawesome::fa(\"star\", fill= \"grey\")\n  })\n  label <- sprintf(\"%s out of %s\", rating, max_rating)\n  div_out <- htmltools::div(title = label, \"aria-label\" = label, role = \"img\", stars)\n  \n  as.character(div_out) %>% \n    gt::html()\n}\n\nmtcars %>% \n  slice(1:5) %>% \n  mutate(rating = purrr::map(sample(1:5, size = 5, TRUE), rating_stars)) %>% \n  gt()\n\n\n\n\n\n  \n    \n    \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n      rating\n    \n  \n  \n    21.0\n6\n160\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\n\n  \n  \n  \n  \n  \n\n    21.0\n6\n160\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\n\n  \n  \n  \n  \n  \n\n    22.8\n4\n108\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\n\n  \n  \n  \n  \n  \n\n    21.4\n6\n258\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n\n  \n  \n  \n  \n  \n\n    18.7\n8\n360\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2"
  },
  {
    "objectID": "gt avanzado.html#agregar-etiquetas",
    "href": "gt avanzado.html#agregar-etiquetas",
    "title": "4  Funciones de gt avanzadas",
    "section": "4.7 Agregar etiquetas",
    "text": "4.7 Agregar etiquetas\nLas etiquetas también resultan particularmente útiles en muchos contextos, permiten identificar rápidamente alguna característica que es de nuestro interés. Para incluirlas en nuestra tabla, no es necesario utilizar una función de gt, simplemente agregamos una nueva columna “cylinder” con la función add_cyl_color que hemos creado previamente.\n\nadd_cyl_color <- function(cyl){\n      add_color <- if (cyl == 4) {\n        \"background: hsl(116, 60%, 90%); color: hsl(116, 30%, 25%);\"\n      } else if (cyl == 6) {\n        \"background: hsl(230, 70%, 90%); color: hsl(230, 45%, 30%);\"\n      } else if (cyl == 8) {\n        \"background: hsl(350, 70%, 90%); color: hsl(350, 45%, 30%);\"\n      }\n      div_out <- htmltools::div(\n        style = paste(\n          \"display: inline-block; padding: 2px 12px; border-radius: 15px; font-weight: 600; font-size: 12px;\",\n          add_color\n          ),\n        paste(cyl, \"Cylinders\")\n      )\n      \n      as.character(div_out) %>% \n        gt::html()\n}\n\nmtcars %>% \n  head() %>% \n  mutate(cylinder = purrr::map(cyl, add_cyl_color)) %>% \n  gt()\n\n\n\n\n\n  \n    \n    \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n      cylinder\n    \n  \n  \n    21.0\n6\n160\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\n6 Cylinders\n    21.0\n6\n160\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\n6 Cylinders\n    22.8\n4\n108\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\n4 Cylinders\n    21.4\n6\n258\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n6 Cylinders\n    18.7\n8\n360\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2\n8 Cylinders\n    18.1\n6\n225\n105\n2.76\n3.460\n20.22\n1\n0\n3\n1\n6 Cylinders"
  },
  {
    "objectID": "gt avanzado.html#agregar-una-sección-expandible",
    "href": "gt avanzado.html#agregar-una-sección-expandible",
    "title": "4  Funciones de gt avanzadas",
    "section": "4.8 Agregar una sección expandible",
    "text": "4.8 Agregar una sección expandible\nUna sección expandible nos ayuda ahorrando mucho espacio, además, ahí podemos incluir información extra respecto a la tabla. Nuevamente, crearemos un objeto llamado “source_details” que lleva la información de la sección con lenguaje HTML, luego usamos tab_source_note(), una función de gt de la cuál puedes saber más en Sección 2.2.\n\nlibrary(htmltools)\n\nsource_details <- paste0(\n  \"<details>\", \"<summary><strong>Table Key, click to expand</strong></summary>\",\n  div(\"mpg: Miles/gallon\"),div(\"cyl: Cylinders\"), div(\"disp: Displacement\"), div(\"hp: Horsepower\"),\n  \"</details\"\n)\n\nmtcars %>%\n  head() %>%\n  select(mpg:hp) %>% \n  gt() %>% \n  tab_source_note(source_note = html(source_details))\n\n\n\n\n\n  \n    \n    \n      mpg\n      cyl\n      disp\n      hp\n    \n  \n  \n    21.0\n6\n160\n110\n    21.0\n6\n160\n110\n    22.8\n4\n108\n93\n    21.4\n6\n258\n110\n    18.7\n8\n360\n175\n    18.1\n6\n225\n105\n  \n  \n    \n      Table Key, click to expandmpg: Miles/galloncyl: Cylindersdisp: Displacementhp: Horsepower"
  },
  {
    "objectID": "gt avanzado.html#gráficos-de-barras",
    "href": "gt avanzado.html#gráficos-de-barras",
    "title": "4  Funciones de gt avanzadas",
    "section": "4.10 Gráficos de barras",
    "text": "4.10 Gráficos de barras\n\nbar_chart <- function(label, height = \"16px\", fill = \"#00bfc4\", background = \"white\") {\n  bar <- glue::glue(\n    \"<div style='background:{fill};width:{label}%;height:{height};'></div>\"\n    )\n  chart <- glue::glue(\n    \"<div style='flex-grow:1;margin-left:8px;background:{background};'>{bar}</div>\"\n  )\n  glue::glue(\n    \"<div style='display:flex;align-items:left';>{chart}</div>\"\n    ) %>%\n  gt::html()\n  \n}\n\nmtcars %>% \n  head() %>% \n  mutate(\n    mpg_val = mpg/max(mpg) * 100,\n    mpg_plot = purrr::map(mpg_val, ~bar_chart(label = .x)),\n    mpg_plot2 = purrr::map(\n      mpg_val, \n      ~bar_chart(label = .x, fill = \"#fc5185\", background = \"#e1e1e1\")\n      ),\n    ) %>% \n  select(cyl, hp, disp, mpg, mpg_plot, mpg_plot2) %>% \n  gt() %>% \n  cols_align(align = \"left\", columns = vars(mpg_plot))\n\n\n\n\n\n  \n    \n    \n      cyl\n      hp\n      disp\n      mpg\n      mpg_plot\n      mpg_plot2\n    \n  \n  \n    6\n110\n160\n21.0\n\n\n    6\n110\n160\n21.0\n\n\n    4\n93\n108\n22.8\n\n\n    6\n110\n258\n21.4\n\n\n    8\n175\n360\n18.7\n\n\n    6\n105\n225\n18.1"
  },
  {
    "objectID": "gt avanzado.html#agregar-imágenes",
    "href": "gt avanzado.html#agregar-imágenes",
    "title": "4  Funciones de gt avanzadas",
    "section": "4.10 Agregar imágenes",
    "text": "4.10 Agregar imágenes\nY como cereza del pastel, terminaremos este capítulo agregando imágenes. Inicialmente. crearemos un objeto tribble con el nombre y la fotografía de cuatro escritores colombianos muy famosos. Para incluir estas imagenes, basta con ustilizar la función gt_img_rows del paquete gtExtras.\n\nsuppressMessages(library(gtExtras))\n\npm_data <- tribble(\n  ~Escritor, ~Foto,\n  'Gabriel García', 'https://upload.wikimedia.org/wikipedia/commons/0/0f/Gabriel_Garcia_Marquez.jpg',\n  'Candelario Obeso', 'https://canaltrece.com.co/uploads/ck-uploads/2018/05/21/CANDELARIO%20OBESO%20.JPG',\n  'Rafael Pombo', 'https://urosario.edu.co/sites/default/files/2023-03/Rafael-Pombo_1.jpg',\n  'Jorge Isaacs', 'https://editorialverbum.es/wp-content/uploads/2020/07/retrato_Isaacs_Jorge.jpg'\n)\n\npm_data |>\n  gt() |>\n  gt_img_rows(columns = 'Foto', height = 100)\n\n\n\n\n\n  \n    \n    \n      Escritor\n      Foto\n    \n  \n  \n    Gabriel García\n\n    Candelario Obeso\n\n    Rafael Pombo\n\n    Jorge Isaacs\n\n  \n  \n  \n\n\n\n\nPuedes personalizar aún más la visualización de las imágenes, puedes usar la función gt_img_circle, también de gtExtras, para que las fotografías queden redondeadas.\n\npm_data |>\n  gt() |>\n  gt_img_circle(column = 'Foto', height = 100, border_weight = 1) |>\n  cols_width(Foto ~ px(110)) # 110 = 100 (height) + 10 (padding around imgs)\n\n\n\n\n\n  \n    \n    \n  \n  \n    \n    \n      Escritor\n      Foto\n    \n  \n  \n    Gabriel García\n\n    Candelario Obeso\n\n    Rafael Pombo\n\n    Jorge Isaacs"
  },
  {
    "objectID": "gt avanzado.html#sec-original",
    "href": "gt avanzado.html#sec-original",
    "title": "4  Funciones de gt avanzadas",
    "section": "4.3 Opción para descargar los datos",
    "text": "4.3 Opción para descargar los datos\nPodemos agregar opciones para que quien vea nuestra tabla tenga la opción de descargar los datos, esto es posible usando funciones de HTML y agregando una nota al pie de página con la función tab_source_note() de gt. Para ilustrarlo, vamos a presentar en una tabla los datos de mtcars dsiponibles en R; inicialmente crearemos un archivo .csv con la función write.csv2, luego usamos lenguaje HTML para crear un hipervínculo que descarge el archivo .csv, y finalmente agregamos dicho link como una nota al pie de página en la tabla.\n\nwrite.csv2(mtcars, \"./file.csv\")\n\nencoded <- readLines(\"./file.csv\") %>% # EXPLICAR ESTO\n  paste0(collapse=\"\\n\") %>% \n  openssl::base64_encode() -> encoded\n\nhtml_encode <- sprintf('data:text/csv;base64,%s', encoded)\nhtml_csv <- glue::glue(\n  \"<a download='mtcars.csv' href='{html_encode}'>CSV Download</a>\"\n  )\n\nhead(mtcars) %>% \n  gt() %>% \n  tab_source_note(html(html_csv))\n\n\n\n\n\n  \n    \n    \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n    \n  \n  \n    21.0\n6\n160\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\n    21.0\n6\n160\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\n    22.8\n4\n108\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\n    21.4\n6\n258\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n    18.7\n8\n360\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2\n    18.1\n6\n225\n105\n2.76\n3.460\n20.22\n1\n0\n3\n1\n  \n  \n    \n      CSV Download\n    \n  \n  \n\n\n\n\nTambién existe una manera más sencilla (sin utilizar lenguaje HTML) para agregar la opción de descargar los datos, solo necesitamos la librería “downloadthis”, veamos cómo, haciendo uso de nuestro ejemplo con mtcars.\n\nlibrary(downloadthis)\n\nhead(mtcars) %>%\n  gt() %>%\n  tab_source_note(\n    mtcars %>%\n      download_this(\n        output_name = \"mtcars\", # Cómo se llamará el archivo una vez descargado \n        output_extension = \".csv\", # El archivo es . csv, también puede ser .xlsx\n        button_label = \"Download csv\", # Cómo se llamará el botón\n        button_type = \"default\", # Tipo de botón, gtambién puede ser danger, warning, etc\n      )\n  )\n\n\n\n\n\n  \n    \n    \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n    \n  \n  \n    21.0\n6\n160\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\n    21.0\n6\n160\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\n    22.8\n4\n108\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\n    21.4\n6\n258\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n    18.7\n8\n360\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2\n    18.1\n6\n225\n105\n2.76\n3.460\n20.22\n1\n0\n3\n1\n  \n  \n    \n      \n   Download csv\n\n    \n  \n  \n\n\n\n\nCon la función download_this podemos personalizar más nuestro botón utilizando lenguaje CSS. Vamos a generar un botón que descargue un archivo .xlsx, de color rojo, letra de tipo “Serif” y borde color negro.\n\nattach_excel <- mtcars %>%\n  download_this(\n    output_name = \"mtcars\",\n    output_extension = \".xlsx\", # Excel file type\n    button_label = \"Download Excel\",\n    class = \"buttonExcel\"\n  )\n\nhead(mtcars) %>%\n  gt() %>%\n  opt_css(\n    css = \"\n    .buttonExcel{\n    font-size: 12px;\n    color: #fff;\n    background-color: red;\n    border-color: black;\n    font-family: serif;\n    font-weight: bold;\n    border-radius: 10px;\n    padding: 4px;\n    }\n    \n    .buttonExcel:hover,\n    .buttonExcel:active,\n    .buttonExcel:focus,\n    .buttonExcel.active {\n    background: grey;\n    color: #ffffff;\n    border-color: grey;\n    }\n    \"\n  ) %>% \n  tab_source_note(attach_excel)\n\n\n\n\n\n  \n    \n    \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n    \n  \n  \n    21.0\n6\n160\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\n    21.0\n6\n160\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\n    22.8\n4\n108\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\n    21.4\n6\n258\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n    18.7\n8\n360\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2\n    18.1\n6\n225\n105\n2.76\n3.460\n20.22\n1\n0\n3\n1\n  \n  \n    \n      \n   Download Excel\n\n    \n  \n  \n\n\n\n\nPara personalizar aún más nuestro botón o en general la opción para descargar los datos, puedes explorar Introduction to downloadthis"
  },
  {
    "objectID": "Agregar Partes.html#sec-footer",
    "href": "Agregar Partes.html#sec-footer",
    "title": "2  Agregar partes a una tabla simple",
    "section": "2.2 Referencias y notas al pie de página (Table footer)",
    "text": "2.2 Referencias y notas al pie de página (Table footer)\nAhora le vamos a incluir referencias y algunas notas en ciertas columnas, para eso usaremos la función tab_source_note\n\ngt_tbl2 <- \n  gt_tbl1 |>\n  tab_source_note(\n    source_note = \"Recurso: The World Almanac and Book of Facts, 1975, página 406.\"\n  ) |>\n  tab_source_note(\n    source_note = \"Referencia: McNeil, D. R. (1977) Interactive Data Analysis. Wiley.\"\n  )\n\n# Visualizamos la tabla\ngt_tbl2\n\n\n\n\n\n  \n    \n      Grandes masas de tierra del mundo\n    \n    \n      Top 10 de las más grandes\n    \n    \n      Nombre\n      Tamaño\n    \n  \n  \n    Asia\n16988\n    Africa\n11506\n    North America\n9390\n    South America\n6795\n    Antarctica\n5500\n    Europe\n3745\n    Australia\n2968\n    Greenland\n840\n    New Guinea\n306\n    Borneo\n280\n  \n  \n    \n      Recurso: The World Almanac and Book of Facts, 1975, página 406.\n    \n    \n      Referencia: McNeil, D. R. (1977) Interactive Data Analysis. Wiley.\n    \n  \n  \n\n\nAgregar una referencia a la tabla\n\n\nAhora agregamos una nota al pie de página con la función tab_footnote(), también es necesario usar la función cells_bodypara especificar el lugar en el que irá el pequeño número que dirige al lector de la tabla a la nota al pie de página.\nHay varias formas de especificar los argumentos rows y columns de cells_body(), estas son:\n\nUn vector de nombres de columnas o nombres de filas\nUn vector con índices de columnas o de filas\nUsando la función de selección c()\nUsando una de las funciones starts_with(), ends_with(), contains(), matches(), one_of(), y everything().\n\nEn nuestro ejemplo, en las filas donde “name” es “North America” y “South America” pondremos una nota al pie de página que diga “América”. Para eso, especificamos que el número se debe ubicar en la columna “name” (columns=name) en las filas \\(3\\) y \\(4\\) (rows=3:4).\n\ngt_tbl3 <- \n  gt_tbl2 |>\n  tab_footnote(\n    footnote = \"América.\",\n    locations = cells_body(columns = Nombre, rows = 3:4)\n  )\n\n# Visualizamos la tabla\ngt_tbl3\n\n\n\n\n\n  \n    \n      Grandes masas de tierra del mundo\n    \n    \n      Top 10 de las más grandes\n    \n    \n      Nombre\n      Tamaño\n    \n  \n  \n    Asia\n16988\n    Africa\n11506\n    North America1\n9390\n    South America1\n6795\n    Antarctica\n5500\n    Europe\n3745\n    Australia\n2968\n    Greenland\n840\n    New Guinea\n306\n    Borneo\n280\n  \n  \n    \n      Recurso: The World Almanac and Book of Facts, 1975, página 406.\n    \n    \n      Referencia: McNeil, D. R. (1977) Interactive Data Analysis. Wiley.\n    \n  \n  \n    \n      1 América.\n    \n  \n\n\nAgregar una nota al pie de página a la tabla\n\n\nTambién es posible filtrar las filas o columnas usando los operadores usuales “\\(==\\)”,“\\(>\\)” y “\\(<\\)”. En nuestro ejemplo, agreguemos la nota al pie de página para aquellas filas donde size es mayor a \\(6000\\) y menor a \\(16000\\), así\n\ngt_tbl4 <- \n  gt_tbl2 |>\n  tab_footnote(\n    footnote = \"El tamaño es mayor que 6000 y menor que 16000\",\n    locations = cells_body(columns = Nombre, rows = Tamaño>6000 & Tamaño<16000)\n  )\n\n# Visualizamos la tabla\ngt_tbl4\n\n\n\n\n\n  \n    \n      Grandes masas de tierra del mundo\n    \n    \n      Top 10 de las más grandes\n    \n    \n      Nombre\n      Tamaño\n    \n  \n  \n    Asia\n16988\n    Africa1\n11506\n    North America1\n9390\n    South America1\n6795\n    Antarctica\n5500\n    Europe\n3745\n    Australia\n2968\n    Greenland\n840\n    New Guinea\n306\n    Borneo\n280\n  \n  \n    \n      Recurso: The World Almanac and Book of Facts, 1975, página 406.\n    \n    \n      Referencia: McNeil, D. R. (1977) Interactive Data Analysis. Wiley.\n    \n  \n  \n    \n      1 El tamaño es mayor que 6000 y menor que 16000\n    \n  \n\n\nAgregar una nota al pie de página a la tabla, usando filtros en la localización\n\n\nPor defecto, se pone un número pequeño para hacer referencia al pie de página, sin embargo, podemos modificarlo usando opt_footnote_marks()\n\ngt_tbl4 <- \n  gt_tbl2 |>\n  tab_footnote(\n    footnote = \"El tamaño es mayor que 6000 y menor que 16000\",\n    locations = cells_body(columns = Nombre, rows = Tamaño>6000 & Tamaño<16000)\n  ) |>\nopt_footnote_marks(marks = c(\"*\", \"+\"))\n\n# Visualizamos la tabla\ngt_tbl4\n\n\n\n\n\n  \n    \n      Grandes masas de tierra del mundo\n    \n    \n      Top 10 de las más grandes\n    \n    \n      Nombre\n      Tamaño\n    \n  \n  \n    Asia\n16988\n    Africa*\n11506\n    North America*\n9390\n    South America*\n6795\n    Antarctica\n5500\n    Europe\n3745\n    Australia\n2968\n    Greenland\n840\n    New Guinea\n306\n    Borneo\n280\n  \n  \n    \n      Recurso: The World Almanac and Book of Facts, 1975, página 406.\n    \n    \n      Referencia: McNeil, D. R. (1977) Interactive Data Analysis. Wiley.\n    \n  \n  \n    \n      * El tamaño es mayor que 6000 y menor que 16000\n    \n  \n\n\nModificación de las marks de la nota al pie de página\n\n\nFinalmente, cabe mencionar que es posible agregar cuantas referencias y notas al pie de página se desee. Las otras funciones cells_*() permiten agregar la nota al pie de página en otras partes de la tabla como títulos, subtítulos, stubs, entre otras. Puede encontrar información más detallada de las funciones cells_*() del paquete gt aquí"
  },
  {
    "objectID": "gt avanzado.html#sec-part",
    "href": "gt avanzado.html#sec-part",
    "title": "4  Funciones de gt avanzadas",
    "section": "4.4 Gráficos Sparkline",
    "text": "4.4 Gráficos Sparkline\nLos sparklines son gráficos muy pequeños que generalmente se dibujan sin ejes ni coordenadas, se usan para presentar la variación a lo largo del tiempo de cierta medida como la temperatura o algún precio. Crearemos una tabla que muestre un sparkline de drat (Rear axle ratio) para cada cyl (Number od cylinders), para ello, haremos uso de la función text_transform() donde indicaremos que se trata de un gráfico y modificaremos ciertos aspectos como los límites de los ejes.\n\nsuppressMessages(library(kableExtra))\n\nmtcars %>%\n  group_by(cyl) %>%\n  summarize(drat_data = list(drat), .groups = \"drop\") %>%\n  gt() %>%\n  text_transform(\n    locations = cells_body(columns = vars(drat_data)),\n    fn = function(x) {\n      data_in <- purrr::pluck(., \"_data\", \"drat_data\")\n      plot <- purrr::map(\n        data_in, ~ kableExtra::spec_plot(\n          .x, ylim = range(mtcars$drat), \n          same_lim = TRUE, width = 300, height = 70\n          )\n        )\n      \n      plot <- purrr::map_chr(plot, \"svg_text\")\n    }\n  )\n\n\n\n\n\n  \n    \n    \n      cyl\n      drat_data\n    \n  \n  \n    4\n\n\n  \n    \n  \n  \n  \n    \n      \n    \n  \n  \n    \n    \n    \n  \n\n\n    6\n\n\n  \n    \n  \n  \n  \n    \n      \n    \n  \n  \n    \n    \n    \n  \n\n\n    8"
  },
  {
    "objectID": "gt av.html#personalización-con-css",
    "href": "gt av.html#personalización-con-css",
    "title": "3  Funciones de gt avanzadas",
    "section": "3.1 Personalización con CSS",
    "text": "3.1 Personalización con CSS\nEl paquete gt tiene la función opt_css que nos permite personalizar la tabla aplicando nuestro propio CSS. Para visualizar esto, vamos a crear una tabla usando la base de datos exibble disponible en R, modificaremos el color de fondo de la tabla (one .gt_table {background-color:}), el espacio de cada para fila de la gráfica (#one .gt_row {padding:}), haremos que los títulos de las columnas se vean centrados (#one .gt_col_heading {text-align:}) y también que cambie el color de fondo de una fila cuando pongamos el mouse sobre ella (#one tr:hover {background-color:})\n\nsuppressMessages(library(gt))\nsuppressMessages(library(dplyr))\n\nexibble %>%\n  dplyr::select(num, currency) %>%\n  gt(id = \"one\") %>% \n  fmt_currency(\n    columns = vars(currency),\n    currency = \"HKD\"\n  ) %>%\n  fmt_scientific(\n    columns = vars(num)\n  ) %>%\n  opt_css(\n    css = \"\n    #one .gt_table { \n      background-color: skyblue;\n    }\n    #one .gt_row {\n      padding: 20px 30px;\n    }\n    #one tr:hover {\n    background-color: #f5f8ff;\n    }\n    #one .gt_col_heading {\n      text-align: center !important;\n    }\n    \"\n  )\n\n\n\n\n\n  \n    \n    \n      num\n      currency\n    \n  \n  \n    1.11 × 10−1\nHK$49.95\n    2.22\nHK$17.95\n    3.33 × 101\nHK$1.39\n    4.44 × 102\nHK$65,100.00\n    5.55 × 103\nHK$1,325.81\n    NA\nHK$13.26\n    7.77 × 105\nNA\n    8.88 × 106\nHK$0.44\n  \n  \n  \n\n\n\n\n¡Quedó preciosa nuestra tabla! Puedes encontrar más opciones de CSS aquí."
  },
  {
    "objectID": "gt av.html#insertar-urls",
    "href": "gt av.html#insertar-urls",
    "title": "3  Funciones de gt avanzadas",
    "section": "3.2 Insertar URLs",
    "text": "3.2 Insertar URLs\nUtilizando lenguaje HTML podemos agregar URLs en nuestra tabla. Para ilustrarlo, vamos a crear una una tabla con tres sitios web y sus respectivas direcciones.\n\nsuppressMessages(library(htmltools))\n\n# Primero creamos la base de datos con los sitios y las direcciones\nex_sites <- data.frame(\n  Dirección = c(\"https://gmail.com\", \"https://youtube.com\", \"https://es.duolingo.com/\"),\n  Sitio = c(\"Gmail\", \"YouTube\", \"Duolingo\")\n)\n\n# Ahora si creamos la tabla\ngt(ex_sites) %>% \n  text_transform(\n    locations = cells_body(columns = vars(Dirección)), # Comenzamos editando la columna con las direcciones\n    fn = function(x) {\n      # la función map de purrr aplica una operación a cada elemento de x\n    purrr::map(x,  ~htmltools::tags$a(href = .x, target = \"_blank\", .x))\n      }\n  ) %>% # EXPLICAR ESTO\n  text_transform(\n    locations = cells_body(columns = vars(Sitio)),\n    fn = function(x) {\n    purrr::map2(\n      .x = x, .y = ex_sites$Dirección, \n      .f = ~glue::glue('<a href=\"{.y}\" target=\"_blank\">{.x}</a>'))\n      }\n  )\n\n\n\n\n\n  \n    \n    \n      Dirección\n      Sitio\n    \n  \n  \n    https://gmail.com\nGmail\n    https://youtube.com\nYouTube\n    https://es.duolingo.com/\nDuolingo"
  },
  {
    "objectID": "gt av.html#sec-original",
    "href": "gt av.html#sec-original",
    "title": "3  Funciones de gt avanzadas",
    "section": "3.3 Opción para descargar los datos",
    "text": "3.3 Opción para descargar los datos\nPodemos agregar opciones para que quien vea nuestra tabla tenga la opción de descargar los datos, esto es posible usando funciones de HTML y agregando una nota al pie de página con la función tab_source_note() de gt. Para ilustrarlo, vamos a presentar en una tabla los datos de mtcars dsiponibles en R; inicialmente crearemos un archivo .csv con la función write.csv2, luego usamos lenguaje HTML para crear un hipervínculo que descarge el archivo .csv, y finalmente agregamos dicho link como una nota al pie de página en la tabla.\n\nwrite.csv2(mtcars, \"./file.csv\")\n\nencoded <- readLines(\"./file.csv\") %>% # EXPLICAR ESTO\n  paste0(collapse=\"\\n\") %>% \n  openssl::base64_encode() -> encoded\n\nhtml_encode <- sprintf('data:text/csv;base64,%s', encoded)\nhtml_csv <- glue::glue(\n  \"<a download='mtcars.csv' href='{html_encode}'>CSV Download</a>\"\n  )\n\nhead(mtcars) %>% \n  gt() %>% \n  tab_source_note(html(html_csv))\n\n\n\n\n\n  \n    \n    \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n    \n  \n  \n    21.0\n6\n160\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\n    21.0\n6\n160\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\n    22.8\n4\n108\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\n    21.4\n6\n258\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n    18.7\n8\n360\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2\n    18.1\n6\n225\n105\n2.76\n3.460\n20.22\n1\n0\n3\n1\n  \n  \n    \n      CSV Download\n    \n  \n  \n\n\n\n\nTambién existe una manera más sencilla (sin utilizar lenguaje HTML) para agregar la opción de descargar los datos, solo necesitamos la librería “downloadthis”, veamos cómo, haciendo uso de nuestro ejemplo con mtcars.\n\nlibrary(downloadthis)\n\nhead(mtcars) %>%\n  gt() %>%\n  tab_source_note(\n    mtcars %>%\n      download_this(\n        output_name = \"mtcars\", # Cómo se llamará el archivo una vez descargado \n        output_extension = \".csv\", # El archivo es . csv, también puede ser .xlsx\n        button_label = \"Download csv\", # Cómo se llamará el botón\n        button_type = \"default\", # Tipo de botón, gtambién puede ser danger, warning, etc\n      )\n  )\n\n\n\n\n\n  \n    \n    \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n    \n  \n  \n    21.0\n6\n160\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\n    21.0\n6\n160\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\n    22.8\n4\n108\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\n    21.4\n6\n258\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n    18.7\n8\n360\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2\n    18.1\n6\n225\n105\n2.76\n3.460\n20.22\n1\n0\n3\n1\n  \n  \n    \n      \n   Download csv\n\n    \n  \n  \n\n\n\n\nCon la función download_this podemos personalizar más nuestro botón utilizando lenguaje CSS. Vamos a generar un botón que descargue un archivo .xlsx, de color rojo, letra de tipo “Serif” y borde color negro.\n\nattach_excel <- mtcars %>%\n  download_this(\n    output_name = \"mtcars\",\n    output_extension = \".xlsx\", # Excel file type\n    button_label = \"Download Excel\",\n    class = \"buttonExcel\"\n  )\n\nhead(mtcars) %>%\n  gt() %>%\n  opt_css(\n    css = \"\n    .buttonExcel{\n    font-size: 12px;\n    color: #fff;\n    background-color: red;\n    border-color: black;\n    font-family: serif;\n    font-weight: bold;\n    border-radius: 10px;\n    padding: 4px;\n    }\n    \n    .buttonExcel:hover,\n    .buttonExcel:active,\n    .buttonExcel:focus,\n    .buttonExcel.active {\n    background: grey;\n    color: #ffffff;\n    border-color: grey;\n    }\n    \"\n  ) %>% \n  tab_source_note(attach_excel)\n\n\n\n\n\n  \n    \n    \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n    \n  \n  \n    21.0\n6\n160\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\n    21.0\n6\n160\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\n    22.8\n4\n108\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\n    21.4\n6\n258\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n    18.7\n8\n360\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2\n    18.1\n6\n225\n105\n2.76\n3.460\n20.22\n1\n0\n3\n1\n  \n  \n    \n      \n   Download Excel\n\n    \n  \n  \n\n\n\n\nPara personalizar aún más nuestro botón o en general la opción para descargar los datos, puedes explorar Introduction to downloadthis"
  },
  {
    "objectID": "gt av.html#agregar-gráficos",
    "href": "gt av.html#agregar-gráficos",
    "title": "3  Funciones de gt avanzadas",
    "section": "3.9 Agregar gráficos",
    "text": "3.9 Agregar gráficos\nAntes, en Sección 3.4, vimos cómo incluir un sparkline a una tabla, ahora, agregaremos cualquier gráfico que sea creado con el paquete ggplot2. Cambiamos un poco de ejemplo, utilizamos los datos “penguins” disponibles en el paquete palmerpenguins, haremos una tabla para mostrar diferentes características de los pesos de los pinguinos según su especie, dentro de las características incluiremos un gráfico de violín.\n\nsuppressMessages(library(palmerpenguins))\nsuppressMessages(library(ggplot2))\nsuppressMessages(library(purrr))\n\n# Cargamos los datos\nfiltered_penguins <- palmerpenguins::penguins |>\n    filter(!is.na(sex))\n\n# Agrupamos por especie\npenguin_weights <- filtered_penguins |>\n  group_by(species) |>\n  summarise(\n    Min = min(body_mass_g),\n    Mean = mean(body_mass_g) |> round(digits = 2),\n    Max = max(body_mass_g)\n  ) |>\n  mutate(species = as.character(species)) |>\n  rename(Species = species)\n\n# Función para realizar los gráficos de violín\nplot_density_species <- function(my_species) {\n  full_range <- filtered_penguins |>\n  pull(body_mass_g) |>\n  range()\n    filtered_penguins |>\n    filter(species == my_species) |>\n    ggplot(aes(x = body_mass_g, y = species)) +\n    geom_violin(fill = 'dodgerblue4') +\n    theme_minimal() +\n    scale_y_discrete(breaks = NULL) +\n    scale_x_continuous(breaks = NULL) +\n    labs(x = element_blank(), y = element_blank()) +\n    coord_cartesian(xlim = full_range)\n}\n\n# Tabla con gt\npenguin_weights |>\n  mutate(Distribution = Species) |> \n  gt() |>\n  tab_spanner(\n    label = 'Penguin\\'s Weight',\n    columns = -Species\n  ) |>\n  text_transform(\n    locations = cells_body(columns = 'Distribution'),\n    fn = function(column) {\n      map(column, plot_density_species) |>\n        ggplot_image(height = px(50), aspect_ratio = 3)\n    }\n  ) \n\n\n\n\n\n  \n    \n    \n      Species\n      \n        Penguin's Weight\n      \n    \n    \n      Min\n      Mean\n      Max\n      Distribution\n    \n  \n  \n    Adelie\n2850\n3706.16\n4775\n\n    Chinstrap\n2700\n3733.09\n4800\n\n    Gentoo\n3950\n5092.44\n6300\n\n  \n  \n  \n\n\n\n\nPuedes consultar otro tipo de gráficos aquí para agregarlos a tu tabla."
  },
  {
    "objectID": "gt av.html#agregar-tooltips",
    "href": "gt av.html#agregar-tooltips",
    "title": "3  Funciones de gt avanzadas",
    "section": "3.5 Agregar tooltips",
    "text": "3.5 Agregar tooltips\nUn tooltip es una herramienta que de ayuda visual que funciona al posar el cursor sobre algún elemento gráfico y se encarga de informar al usuario respecto a dicho elemento. Inicialmente crearemos una función que genere el tooltip usando lenguaje HTML, y para agregar esta super herramienta a la tabla, vamos a modificar el nombre de las columnas con las funciones cols_label() y html(), ambas de gt.\n\nsuppressMessages(library(htmltools))\nwith_tooltip <- function(value, tooltip) {\n  tags$abbr(\n    style = \"text-decoration: underline;\n    text-decoration-style: solid; color: blue\",\n    title = tooltip,\n    value\n  ) %>% \n    as.character()\n}\n\nmtcars %>% \n  head() %>% \n  tibble::rownames_to_column() %>% \n  select(rowname, mpg:hp) %>% \n  gt() %>% \n   cols_label(\n    mpg = gt::html(with_tooltip(\"MPG\", \"Miles per Gallon\")),\n    cyl = gt::html(with_tooltip(\"CYL\", \"Number of Cylinders\")),\n    disp = gt::html(with_tooltip(\"DISP\", \"Displacement\")),\n    hp = gt::html(with_tooltip(\"HP\", \"Horsepower\")),\n  )\n\n\n\n\n\n  \n    \n    \n      \n      MPG\n      CYL\n      DISP\n      HP\n    \n  \n  \n    Mazda RX4\n21.0\n6\n160\n110\n    Mazda RX4 Wag\n21.0\n6\n160\n110\n    Datsun 710\n22.8\n4\n108\n93\n    Hornet 4 Drive\n21.4\n6\n258\n110\n    Hornet Sportabout\n18.7\n8\n360\n175\n    Valiant\n18.1\n6\n225\n105"
  },
  {
    "objectID": "gt av.html#agregar-iconos",
    "href": "gt av.html#agregar-iconos",
    "title": "4  Funciones de gt avanzadas",
    "section": "4.6 Agregar iconos",
    "text": "4.6 Agregar iconos"
  },
  {
    "objectID": "gt av.html",
    "href": "gt av.html",
    "title": "3  Funciones de gt avanzadas",
    "section": "",
    "text": "4\nExisten muchísimas funciones en gt que te permiten personalizar aún más tu tabla. Puedes encontrar la lista completa aquí."
  },
  {
    "objectID": "gt av.html#sec-part",
    "href": "gt av.html#sec-part",
    "title": "3  Funciones de gt avanzadas",
    "section": "3.4 Gráficos Sparkline",
    "text": "3.4 Gráficos Sparkline\nLos sparklines son gráficos muy pequeños que generalmente se dibujan sin ejes ni coordenadas, se usan para presentar la variación a lo largo del tiempo de cierta medida como la temperatura o algún precio. Crearemos una tabla que muestre un sparkline de drat (Rear axle ratio) para cada cyl (Number od cylinders), para ello, haremos uso de la función text_transform() donde indicaremos que se trata de un gráfico y modificaremos ciertos aspectos como los límites de los ejes.\n\nsuppressMessages(library(kableExtra))\n\nmtcars %>%\n  group_by(cyl) %>%\n  summarize(drat_data = list(drat), .groups = \"drop\") %>%\n  gt() %>%\n  text_transform(\n    locations = cells_body(columns = vars(drat_data)),\n    fn = function(x) {\n      data_in <- purrr::pluck(., \"_data\", \"drat_data\")\n      plot <- purrr::map(\n        data_in, ~ kableExtra::spec_plot(\n          .x, ylim = range(mtcars$drat), \n          same_lim = TRUE, width = 300, height = 70\n          )\n        )\n      \n      plot <- purrr::map_chr(plot, \"svg_text\")\n    }\n  )\n\n\n\n\n\n  \n    \n    \n      cyl\n      drat_data\n    \n  \n  \n    4\n\n\n  \n    \n  \n  \n  \n    \n      \n    \n  \n  \n    \n    \n    \n  \n\n\n    6\n\n\n  \n    \n  \n  \n  \n    \n      \n    \n  \n  \n    \n    \n    \n  \n\n\n    8"
  },
  {
    "objectID": "gt av.html#agregar-íconos",
    "href": "gt av.html#agregar-íconos",
    "title": "3  Funciones de gt avanzadas",
    "section": "3.6 Agregar íconos",
    "text": "3.6 Agregar íconos\nY ahora, es momento de agregar íconos. En R, existe el paquete fontawesome que, junto con la función fa(), permiten agregar uno o más íconos Font Awesome. Para adicionarlos en nuestra tabla, nuevamente usaremos la función text_transform() de gt, ubicamos la columna cyl con la función cells_body y ahora sí usamos lenguaje HTML y la función fa() para que aparezcan los camiones (truck,truck-pickup,truck-monster).\n\nsuppressMessages(library(htmltools))\nmtcars %>% \n  head() %>% \n  tibble::rownames_to_column() %>% \n  select(rowname, mpg:hp) %>%\n  gt() %>% \n  cols_label(\n    mpg = gt::html(with_tooltip(\"MPG\", \"Miles per Gallon\")),\n    cyl = gt::html(with_tooltip(\"CYL\", \"Number of Cylinders\")),\n    disp = gt::html(with_tooltip(\"DISP\", \"Displacement\")),\n    hp = gt::html(with_tooltip(\"HP\", \"Horsepower\")),\n  ) %>%\n  text_transform(\n    locations = cells_body(columns = vars(cyl), rows = cyl == 4),\n    fn = function(x){gt::html(fontawesome::fa(\"truck-pickup\", fill = \"blue\"))}\n  ) %>% \n  text_transform(\n    locations = cells_body(columns = vars(cyl), rows = cyl == 6),\n    fn = function(x){gt::html(fontawesome::fa(\"truck-moving\", fill = \"green\"))}\n  ) %>% \n  text_transform(\n    locations = cells_body(columns = vars(cyl), rows = cyl == 8),\n    fn = function(x){gt::html(fontawesome::fa(\"truck-monster\", fill = \"red\"))}\n  )\n\n\n\n\n\n  \n    \n    \n      \n      MPG\n      CYL\n      DISP\n      HP\n    \n  \n  \n    Mazda RX4\n21.0\n\n160\n110\n    Mazda RX4 Wag\n21.0\n\n160\n110\n    Datsun 710\n22.8\n\n108\n93\n    Hornet 4 Drive\n21.4\n\n258\n110\n    Hornet Sportabout\n18.7\n\n360\n175\n    Valiant\n18.1\n\n225\n105\n  \n  \n  \n\n\n\n\nNo solo puedes agregar carros a tus tablas, puedes agregar cualquier ícono de Font Awesome que esté aquí.\nTambién es posible incluir no solo uno sino varios íconos en la tabla, esto puede ser útil en algunos contextos, por ejemplo, para calificar ciertas cosas. A nuestro ejemplo en Sección 3.3, vamos a agregarle un rating con estrellas, para ello crearemos una función, rating_stars(), que se encarga de colorear las estrellas dependiendo del rating.\n\nrating_stars <- function(rating, max_rating = 5) {\n  rounded_rating <- floor(rating + 0.5)  # always round up\n  stars <- lapply(seq_len(max_rating), function(i) {\n    if (i <= rounded_rating) fontawesome::fa(\"star\", fill= \"orange\") else fontawesome::fa(\"star\", fill= \"grey\")\n  })\n  label <- sprintf(\"%s out of %s\", rating, max_rating)\n  div_out <- htmltools::div(title = label, \"aria-label\" = label, role = \"img\", stars)\n  \n  as.character(div_out) %>% \n    gt::html()\n}\n\nmtcars %>% \n  slice(1:5) %>% \n  mutate(rating = purrr::map(sample(1:5, size = 5, TRUE), rating_stars)) %>% \n  gt()\n\n\n\n\n\n  \n    \n    \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n      rating\n    \n  \n  \n    21.0\n6\n160\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\n\n  \n  \n  \n  \n  \n\n    21.0\n6\n160\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\n\n  \n  \n  \n  \n  \n\n    22.8\n4\n108\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\n\n  \n  \n  \n  \n  \n\n    21.4\n6\n258\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n\n  \n  \n  \n  \n  \n\n    18.7\n8\n360\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2"
  },
  {
    "objectID": "gt av.html#agregar-etiquetas",
    "href": "gt av.html#agregar-etiquetas",
    "title": "3  Funciones de gt avanzadas",
    "section": "3.7 Agregar etiquetas",
    "text": "3.7 Agregar etiquetas\nLas etiquetas también resultan particularmente útiles en muchos contextos, permiten identificar rápidamente alguna característica que es de nuestro interés. Para incluirlas en nuestra tabla, no es necesario utilizar una función de gt, simplemente agregamos una nueva columna “cylinder” con la función add_cyl_color que hemos creado previamente.\n\nadd_cyl_color <- function(cyl){\n      add_color <- if (cyl == 4) {\n        \"background: hsl(116, 60%, 90%); color: hsl(116, 30%, 25%);\"\n      } else if (cyl == 6) {\n        \"background: hsl(230, 70%, 90%); color: hsl(230, 45%, 30%);\"\n      } else if (cyl == 8) {\n        \"background: hsl(350, 70%, 90%); color: hsl(350, 45%, 30%);\"\n      }\n      div_out <- htmltools::div(\n        style = paste(\n          \"display: inline-block; padding: 2px 12px; border-radius: 15px; font-weight: 600; font-size: 12px;\",\n          add_color\n          ),\n        paste(cyl, \"Cylinders\")\n      )\n      \n      as.character(div_out) %>% \n        gt::html()\n}\n\nmtcars %>% \n  head() %>% \n  mutate(cylinder = purrr::map(cyl, add_cyl_color)) %>% \n  gt()\n\n\n\n\n\n  \n    \n    \n      mpg\n      cyl\n      disp\n      hp\n      drat\n      wt\n      qsec\n      vs\n      am\n      gear\n      carb\n      cylinder\n    \n  \n  \n    21.0\n6\n160\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\n6 Cylinders\n    21.0\n6\n160\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\n6 Cylinders\n    22.8\n4\n108\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\n4 Cylinders\n    21.4\n6\n258\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n6 Cylinders\n    18.7\n8\n360\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2\n8 Cylinders\n    18.1\n6\n225\n105\n2.76\n3.460\n20.22\n1\n0\n3\n1\n6 Cylinders"
  },
  {
    "objectID": "gt av.html#agregar-una-sección-expandible",
    "href": "gt av.html#agregar-una-sección-expandible",
    "title": "3  Funciones de gt avanzadas",
    "section": "3.8 Agregar una sección expandible",
    "text": "3.8 Agregar una sección expandible\nUna sección expandible nos ayuda ahorrando mucho espacio, además, ahí podemos incluir información extra respecto a la tabla. Nuevamente, crearemos un objeto llamado “source_details” que lleva la información de la sección con lenguaje HTML, luego usamos tab_source_note(), una función de gt de la cuál puedes saber más en Sección 2.2.\n\nlibrary(htmltools)\n\nsource_details <- paste0(\n  \"<details>\", \"<summary><strong>Table Key, click to expand</strong></summary>\",\n  div(\"mpg: Miles/gallon\"),div(\"cyl: Cylinders\"), div(\"disp: Displacement\"), div(\"hp: Horsepower\"),\n  \"</details\"\n)\n\nmtcars %>%\n  head() %>%\n  select(mpg:hp) %>% \n  gt() %>% \n  tab_source_note(source_note = html(source_details))\n\n\n\n\n\n  \n    \n    \n      mpg\n      cyl\n      disp\n      hp\n    \n  \n  \n    21.0\n6\n160\n110\n    21.0\n6\n160\n110\n    22.8\n4\n108\n93\n    21.4\n6\n258\n110\n    18.7\n8\n360\n175\n    18.1\n6\n225\n105\n  \n  \n    \n      Table Key, click to expandmpg: Miles/galloncyl: Cylindersdisp: Displacementhp: Horsepower"
  },
  {
    "objectID": "gt av.html#agregar-imágenes",
    "href": "gt av.html#agregar-imágenes",
    "title": "3  Funciones de gt avanzadas",
    "section": "3.10 Agregar imágenes",
    "text": "3.10 Agregar imágenes\nY como cereza del pastel, terminaremos este capítulo agregando imágenes. Inicialmente. crearemos un objeto tribble con el nombre y la fotografía de cuatro escritores colombianos muy famosos. Para incluir estas imagenes, basta con ustilizar la función gt_img_rows del paquete gtExtras.\n\nsuppressMessages(library(gtExtras))\n\npm_data <- tribble(\n  ~Escritor, ~Foto,\n  'Gabriel García', 'https://upload.wikimedia.org/wikipedia/commons/0/0f/Gabriel_Garcia_Marquez.jpg',\n  'Candelario Obeso', 'https://canaltrece.com.co/uploads/ck-uploads/2018/05/21/CANDELARIO%20OBESO%20.JPG',\n  'Rafael Pombo', 'https://urosario.edu.co/sites/default/files/2023-03/Rafael-Pombo_1.jpg',\n  'Jorge Isaacs', 'https://editorialverbum.es/wp-content/uploads/2020/07/retrato_Isaacs_Jorge.jpg'\n)\n\npm_data |>\n  gt() |>\n  gt_img_rows(columns = 'Foto', height = 100)\n\n\n\n\n\n  \n    \n    \n      Escritor\n      Foto\n    \n  \n  \n    Gabriel García\n\n    Candelario Obeso\n\n    Rafael Pombo\n\n    Jorge Isaacs\n\n  \n  \n  \n\n\n\n\nPuedes personalizar aún más la visualización de las imágenes, puedes usar la función gt_img_circle, también de gtExtras, para que las fotografías queden redondeadas.\n\npm_data |>\n  gt() |>\n  gt_img_circle(column = 'Foto', height = 100, border_weight = 1) |>\n  cols_width(Foto ~ px(110)) # 110 = 100 (height) + 10 (padding around imgs)\n\n\n\n\n\n  \n    \n    \n  \n  \n    \n    \n      Escritor\n      Foto\n    \n  \n  \n    Gabriel García\n\n    Candelario Obeso\n\n    Rafael Pombo\n\n    Jorge Isaacs"
  },
  {
    "objectID": "gt av.html#exportar-y-extraer-una-tabla-gt",
    "href": "gt av.html#exportar-y-extraer-una-tabla-gt",
    "title": "3  Funciones de gt avanzadas",
    "section": "3.11 Exportar y extraer una tabla gt",
    "text": "3.11 Exportar y extraer una tabla gt\nComo mencionamos en el índice, las tablas que se realizan usando gt no son almacenadas ni guardadas, pero esto puede solucionarse usando la función gtsave()\n\n\n\n\ngt_tbl |> gtsave(filename = \"islands.png\")\n\nSe puede guardar en distintos formatos como .tex, .rtf, .docx y .html.\nExisten muchísimas funciones en gt que te permiten personalizar aún más tu tabla. Puedes encontrar la lista completa aquí."
  }
]