.buttonExcel:focus,
.buttonExcel.active {
background: grey;
color: #ffffff;
border-color: grey;
}
"
) %>%
tab_source_note(attach_excel)
head(mtcars) %>%
gt() %>%
opt_css(
css = "
.buttonExcel{
font-size: 12px;
color: #fff;
background-color: red;
border-color: black;
font-family: "Times New Roman", Times, serif;
head(mtcars) %>%
gt() %>%
opt_css(
css = "
.buttonExcel{
font-size: 12px;
color: #fff;
background-color: red;
border-color: black;
font-family: serif;
font-weight: bold;
border-radius: 10px;
padding: 4px;
}
.buttonExcel:hover,
.buttonExcel:active,
.buttonExcel:focus,
.buttonExcel.active {
background: grey;
color: #ffffff;
border-color: grey;
}
"
) %>%
tab_source_note(attach_excel)
install.packages("kableExtra")
suppressMessages(library(kableExtra))
suppressMessages(library(kableExtra))
mtcars %>%
group_by(cyl) %>%
summarize(mpg_data = list(mpg), .groups = "drop") %>%
gt() %>%
text_transform(
locations = cells_body(columns = vars(mpg_data)),
fn = function(x) {
data_in <- purrr::pluck(., "_data", "mpg_data")
plot <- purrr::map(
data_in, ~ kableExtra::spec_plot(
.x, ylim = range(mtcars$mpg),
same_lim = TRUE, width = 300, height = 70
)
)
plot <- purrr::map_chr(plot, "svg_text")
}
)
with_tooltip <- function(value, tooltip) {
tags$abbr(
style = "text-decoration: underline;
text-decoration-style: solid; color: blue",
title = tooltip,
value
) %>%
as.character()
}
suppressMessages(library(gt))
suppressMessages(library(gt))
suppressMessages(library(dplyr))
mtcars %>%
head() %>%
tibble::rownames_to_column() %>%
select(rowname, mpg:hp) %>%
gt() %>%
cols_label(
mpg = gt::html(with_tooltip("MPG", "Miles per Gallon")),
cyl = gt::html(with_tooltip("CYL", "Number of Cylinders")),
disp = gt::html(with_tooltip("DISP", "Displacement")),
hp = gt::html(with_tooltip("HP", "Horsepower")),
)
with_tooltip <- function(value, tooltip) {
tags$abbr(
style = "text-decoration: underline;
text-decoration-style: solid; color: blue",
title = tooltip,
value
) %>%
as.character()
}
mtcars %>%
head() %>%
tibble::rownames_to_column() %>%
select(rowname, mpg:hp) %>%
gt() %>%
cols_label(
mpg = gt::html(with_tooltip("MPG", "Miles per Gallon")),
cyl = gt::html(with_tooltip("CYL", "Number of Cylinders")),
disp = gt::html(with_tooltip("DISP", "Displacement")),
hp = gt::html(with_tooltip("HP", "Horsepower")),
)
library(htmltools)
with_tooltip <- function(value, tooltip) {
tags$abbr(
style = "text-decoration: underline;
text-decoration-style: solid; color: blue",
title = tooltip,
value
) %>%
as.character()
}
mtcars %>%
head() %>%
tibble::rownames_to_column() %>%
select(rowname, mpg:hp) %>%
gt() %>%
cols_label(
mpg = gt::html(with_tooltip("MPG", "Miles per Gallon")),
cyl = gt::html(with_tooltip("CYL", "Number of Cylinders")),
disp = gt::html(with_tooltip("DISP", "Displacement")),
hp = gt::html(with_tooltip("HP", "Horsepower")),
)
mtcars %>%
head() %>%
gt() %>%
text_transform(
locations = cells_body(columns = vars(cyl), rows = cyl == 4),
fn = function(x){gt::html(fontawesome::fa("truck-pickup", fill = "blue"))}
) %>%
text_transform(
locations = cells_body(columns = vars(cyl), rows = cyl == 6),
fn = function(x){gt::html(fontawesome::fa("truck", fill = "grey"))}
) %>%
text_transform(
locations = cells_body(columns = vars(cyl), rows = cyl == 8),
fn = function(x){gt::html(fontawesome::fa("truck-monster", fill = "red"))}
)
# note you could use ANY font-awesome logo
# https://fontawesome.com/cheatsheet
rating_stars <- function(rating, max_rating = 5) {
rounded_rating <- floor(rating + 0.5)  # always round up
stars <- lapply(seq_len(max_rating), function(i) {
if (i <= rounded_rating) fontawesome::fa("star", fill= "orange") else fontawesome::fa("star", fill= "grey")
})
label <- sprintf("%s out of %s", rating, max_rating)
div_out <- htmltools::div(title = label, "aria-label" = label, role = "img", stars)
as.character(div_out) %>%
gt::html()
}
mtcars %>%
slice(1:5) %>%
mutate(rating = purrr::map(sample(1:5, size = 5, TRUE), rating_stars)) %>%
gt()
add_cyl_color <- function(cyl){
add_color <- if (cyl == 4) {
"background: hsl(116, 60%, 90%); color: hsl(116, 30%, 25%);"
} else if (cyl == 6) {
"background: hsl(230, 70%, 90%); color: hsl(230, 45%, 30%);"
} else if (cyl == 8) {
"background: hsl(350, 70%, 90%); color: hsl(350, 45%, 30%);"
}
div_out <- htmltools::div(
style = paste(
"display: inline-block; padding: 2px 12px; border-radius: 15px; font-weight: 600; font-size: 12px;",
add_color
),
paste(cyl, "Cylinders")
)
as.character(div_out) %>%
gt::html()
}
mtcars %>%
head() %>%
mutate(cylinder = purrr::map(cyl, add_cyl_color)) %>%
gt()
bar_chart <- function(label, height = "16px", fill = "#00bfc4", background = "white") {
bar <- glue::glue(
"<div style='background:{fill};width:{label}%;height:{height};'></div>"
)
chart <- glue::glue(
"<div style='flex-grow:1;margin-left:8px;background:{background};'>{bar}</div>"
)
glue::glue(
"<div style='display:flex;align-items:left';>{chart}</div>"
) %>%
gt::html()
}
mtcars %>%
head() %>%
mutate(
mpg_val = mpg/max(mpg) * 100,
mpg_plot = purrr::map(mpg_val, ~bar_chart(label = .x)),
mpg_plot2 = purrr::map(
mpg_val,
~bar_chart(label = .x, fill = "#fc5185", background = "#e1e1e1")
),
) %>%
select(cyl, hp, disp, mpg, mpg_plot, mpg_plot2) %>%
gt() %>%
cols_align(align = "left", columns = vars(mpg_plot))
head(cars)
head(mtcars)
?mtcars
mtcars %>%
group_by(cyl) %>%
summarize(drat_data = list(drat), .groups = "drop") %>%
gt() %>%
text_transform(
locations = cells_body(columns = vars(drat_data)),
fn = function(x) {
data_in <- purrr::pluck(., "_data", "drat_data")
plot <- purrr::map(
data_in, ~ kableExtra::spec_plot(
.x, ylim = range(mtcars$drat),
same_lim = TRUE, width = 300, height = 70
)
)
plot <- purrr::map_chr(plot, "svg_text")
}
)
library(dplyr)
mtcars %>%
group_by(cyl) %>%
summarize(drat_data = list(drat), .groups = "drop") %>%
gt() %>%
text_transform(
locations = cells_body(columns = vars(drat_data)),
fn = function(x) {
data_in <- purrr::pluck(., "_data", "drat_data")
plot <- purrr::map(
data_in, ~ kableExtra::spec_plot(
.x, ylim = range(mtcars$drat),
same_lim = TRUE, width = 300, height = 70
)
)
plot <- purrr::map_chr(plot, "svg_text")
}
)
suppressMessages(library(kableExtra))
mtcars %>%
group_by(cyl) %>%
summarize(drat_data = list(drat), .groups = "drop") %>%
gt() %>%
text_transform(
locations = cells_body(columns = vars(drat_data)),
fn = function(x) {
data_in <- purrr::pluck(., "_data", "drat_data")
plot <- purrr::map(
data_in, ~ kableExtra::spec_plot(
.x, ylim = range(mtcars$drat),
same_lim = TRUE, width = 300, height = 70
)
)
plot <- purrr::map_chr(plot, "svg_text")
}
)
library(gt)
mtcars %>%
group_by(cyl) %>%
summarize(drat_data = list(drat), .groups = "drop") %>%
gt() %>%
text_transform(
locations = cells_body(columns = vars(drat_data)),
fn = function(x) {
data_in <- purrr::pluck(., "_data", "drat_data")
plot <- purrr::map(
data_in, ~ kableExtra::spec_plot(
.x, ylim = range(mtcars$drat),
same_lim = TRUE, width = 300, height = 70
)
)
plot <- purrr::map_chr(plot, "svg_text")
}
)
?map_chr
?tags
?fontawsome
fa?
.
?fa
#| warning: false
mtcars %>%
head() %>%
gt() %>%
text_transform(
locations = cells_body(columns = vars(cyl), rows = cyl == 4),
fn = function(x){gt::html(fontawesome::fa("truck-pickup", fill = "blue"))}
) %>%
text_transform(
locations = cells_body(columns = vars(cyl), rows = cyl == 6),
fn = function(x){gt::html(fontawesome::fa("truck", fill = "grey"))}
) %>%
text_transform(
locations = cells_body(columns = vars(cyl), rows = cyl == 8),
fn = function(x){gt::html(fontawesome::fa("truck-monster", fill = "red"))}
)
install.packages("fontawesome")
install.packages("fontawesome")
library(fontawesome)
?fa
#| warning: false
mtcars %>%
head() %>%
gt() %>%
cols_label(
mpg = gt::html(with_tooltip("MPG", "Miles per Gallon")),
cyl = gt::html(with_tooltip("CYL", "Number of Cylinders")),
disp = gt::html(with_tooltip("DISP", "Displacement")),
hp = gt::html(with_tooltip("HP", "Horsepower")),
),
#| warning: false
mtcars %>%
head() %>%
gt() %>%
cols_label(
mpg = gt::html(with_tooltip("MPG", "Miles per Gallon")),
cyl = gt::html(with_tooltip("CYL", "Number of Cylinders")),
disp = gt::html(with_tooltip("DISP", "Displacement")),
hp = gt::html(with_tooltip("HP", "Horsepower")),
) %>%
text_transform(
locations = cells_body(columns = vars(cyl), rows = cyl == 4),
fn = function(x){gt::html(fontawesome::fa("truck-pickup", fill = "blue"))}
) %>%
text_transform(
locations = cells_body(columns = vars(cyl), rows = cyl == 6),
fn = function(x){gt::html(fontawesome::fa("truck", fill = "grey"))}
) %>%
text_transform(
locations = cells_body(columns = vars(cyl), rows = cyl == 8),
fn = function(x){gt::html(fontawesome::fa("truck-monster", fill = "red"))}
)
#| warning: false
with_tooltip <- function(value, tooltip) {
tags$abbr(
style = "text-decoration: underline;
text-decoration-style: solid; color: blue",
title = tooltip,
value
) %>%
as.character()
}
#| warning: false
mtcars %>%
head() %>%
gt() %>%
cols_label(
mpg = gt::html(with_tooltip("MPG", "Miles per Gallon")),
cyl = gt::html(with_tooltip("CYL", "Number of Cylinders")),
disp = gt::html(with_tooltip("DISP", "Displacement")),
hp = gt::html(with_tooltip("HP", "Horsepower")),
) %>%
text_transform(
locations = cells_body(columns = vars(cyl), rows = cyl == 4),
fn = function(x){gt::html(fontawesome::fa("truck-pickup", fill = "blue"))}
) %>%
text_transform(
locations = cells_body(columns = vars(cyl), rows = cyl == 6),
fn = function(x){gt::html(fontawesome::fa("truck", fill = "grey"))}
) %>%
text_transform(
locations = cells_body(columns = vars(cyl), rows = cyl == 8),
fn = function(x){gt::html(fontawesome::fa("truck-monster", fill = "red"))}
)
#| warning: false
mtcars %>%
head() %>%
tibble::rownames_to_column() %>%
select(rowname, mpg:hp) %>%
gt() %>%
cols_label(
mpg = gt::html(with_tooltip("MPG", "Miles per Gallon")),
cyl = gt::html(with_tooltip("CYL", "Number of Cylinders")),
disp = gt::html(with_tooltip("DISP", "Displacement")),
hp = gt::html(with_tooltip("HP", "Horsepower")),
) %>%
text_transform(
locations = cells_body(columns = vars(cyl), rows = cyl == 4),
fn = function(x){gt::html(fontawesome::fa("truck-pickup", fill = "blue"))}
) %>%
text_transform(
locations = cells_body(columns = vars(cyl), rows = cyl == 6),
fn = function(x){gt::html(fontawesome::fa("truck", fill = "grey"))}
) %>%
text_transform(
locations = cells_body(columns = vars(cyl), rows = cyl == 8),
fn = function(x){gt::html(fontawesome::fa("truck-monster", fill = "red"))}
)
mtcars %>%
head() %>%
tibble::rownames_to_column() %>%
select(rowname, mpg:hp) %>%
gt() %>%
cols_label(
mpg = gt::html(with_tooltip("MPG", "Miles per Gallon")),
cyl = gt::html(with_tooltip("CYL", "Number of Cylinders")),
disp = gt::html(with_tooltip("DISP", "Displacement")),
hp = gt::html(with_tooltip("HP", "Horsepower")),
)
?tags
#| warning: false
suppressMessages(library(htmltools))
with_tooltip <- function(value, tooltip) {
tags$abbr(
style = "text-decoration: underline;
text-decoration-style: solid; color: blue",
title = tooltip,
value
) %>%
as.character()
}
mtcars %>%
head() %>%
tibble::rownames_to_column() %>%
select(rowname, mpg:hp) %>%
gt() %>%
cols_label(
mpg = gt::html(with_tooltip("MPG", "Miles per Gallon")),
cyl = gt::html(with_tooltip("CYL", "Number of Cylinders")),
disp = gt::html(with_tooltip("DISP", "Displacement")),
hp = gt::html(with_tooltip("HP", "Horsepower")),
)
mtcars %>%
head() %>%
tibble::rownames_to_column() %>%
select(rowname, mpg:hp) %>%
gt() %>%
cols_label(
mpg = gt::html(with_tooltip("MPG", "Miles per Gallon")),
cyl = gt::html(with_tooltip("CYL", "Number of Cylinders")),
disp = gt::html(with_tooltip("DISP", "Displacement")),
hp = gt::html(with_tooltip("HP", "Horsepower")),
) %>%
text_transform(
locations = cells_body(columns = vars(cyl), rows = cyl == 4),
fn = function(x){gt::html(fontawesome::fa("truck-pickup", fill = "blue"))}
) %>%
text_transform(
locations = cells_body(columns = vars(cyl), rows = cyl == 6),
fn = function(x){gt::html(fontawesome::fa("truck", fill = "grey"))}
) %>%
text_transform(
locations = cells_body(columns = vars(cyl), rows = cyl == 8),
fn = function(x){gt::html(fontawesome::fa("truck-monster", fill = "red"))}
)
mtcars %>%
head() %>%
tibble::rownames_to_column() %>%
select(rowname, mpg:hp) %>%
gt() %>%
cols_label(
mpg = gt::html(with_tooltip("MPG", "Miles per Gallon")),
cyl = gt::html(with_tooltip("CYL", "Number of Cylinders")),
disp = gt::html(with_tooltip("DISP", "Displacement")),
hp = gt::html(with_tooltip("HP", "Horsepower")),
) %>%
text_transform(
locations = cells_body(columns = vars(cyl), rows = cyl == 4),
fn = function(x){gt::html(fontawesome::fa("truck-pickup", fill = "blue"))}
) %>%
text_transform(
locations = cells_body(columns = vars(cyl), rows = cyl == 6),
fn = function(x){gt::html(fontawesome::fa("truck-front", fill = "grey"))}
) %>%
text_transform(
locations = cells_body(columns = vars(cyl), rows = cyl == 8),
fn = function(x){gt::html(fontawesome::fa("truck-monster", fill = "red"))}
)
mtcars %>%
head() %>%
tibble::rownames_to_column() %>%
select(rowname, mpg:hp) %>%
gt() %>%
cols_label(
mpg = gt::html(with_tooltip("MPG", "Miles per Gallon")),
cyl = gt::html(with_tooltip("CYL", "Number of Cylinders")),
disp = gt::html(with_tooltip("DISP", "Displacement")),
hp = gt::html(with_tooltip("HP", "Horsepower")),
) %>%
text_transform(
locations = cells_body(columns = vars(cyl), rows = cyl == 4),
fn = function(x){gt::html(fontawesome::fa("truck-pickup", fill = "blue"))}
) %>%
text_transform(
locations = cells_body(columns = vars(cyl), rows = cyl == 6),
fn = function(x){gt::html(fontawesome::fa("truck", fill = "green"))}
) %>%
text_transform(
locations = cells_body(columns = vars(cyl), rows = cyl == 8),
fn = function(x){gt::html(fontawesome::fa("truck-monster", fill = "red"))}
)
r_png_url <- "https://www.r-project.org/logo/Rlogo.png"
dplyr::tibble(
pixels = px(seq(10, 20, 5)),
image = seq(10, 20, 5)
) %>%
gt() %>%
text_transform(
locations = cells_body(vars(image)),
fn = function(x) {
web_image(
url = r_png_url,
height = as.numeric(x)
)
}
)
